<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุฃุณูุงุก ุงููู ุงูุญุณูู ูุน ุชูุงูู ุนููู ุงูุฑูู ูุงููููุฒ ูุงูุฃุณุฑุงุฑ</title>
    <style>
        :root {
            --bg: #0b0f12;
            --panel: #071018;
            --muted: #9aa4ad;
            --accent: #e74c3c;
            --cell-size: 80px;
            --dark-tile: #111111;
            --light-tile: #dddddd;
            --symbol-size: 12px;
            --symbol-color: #f1c40f;
        }
        * {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            min-height: 100vh;
            background: var(--bg);
            color: #fff;
            font-family: "Noto Naskh Arabic", "Segoe UI", Tahoma, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: center;
            padding: 16px;
            overflow-x: hidden;
        }
        a {
            color: #58a6ff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .header {
            width: 100%;
            max-width: 1200px;
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: space-between;
        }
        .title {
            font-size: 20px;
            font-weight: 800;
        }
        .controls {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }
        input[type="text"],
        textarea,
        input[type="date"],
        select {
            background: #071018;
            border: 1px solid #122028;
            color: #fff;
            padding: 8px;
            border-radius: 8px;
            direction: rtl;
        }
        textarea {
            width: 520px;
            min-height: 80px;
            resize: vertical;
        }
        .btn {
            padding: 8px 12px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 700;
        }
        .btn-main {
            background: var(--accent);
            color: #fff;
        }
        .btn-ghost {
            background: transparent;
            border: 1px solid #233;
            color: var(--muted);
        }
        .btn-spectrum {
            background: linear-gradient(90deg, #e74c3c, #f39c12, #f1c40f, #2ecc71, #1abc9c, #3498db, #9b59b6);
            color: #000;
        }
        .wrapper {
            width: 100%;
            max-width: 1200px;
            display: flex;
            gap: 16px;
            align-items: flex-start;
            justify-content: center;
            flex-wrap: wrap;
        }
        .board-wrap {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
            overflow: visible;
            padding: 20px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(8, var(--cell-size));
            grid-template-rows: repeat(8, var(--cell-size));
            gap: 6px;
            background: transparent;
            padding: 6px;
            border-radius: 12px;
            transition: transform 0.1s ease, scale 0.1s ease;
            transform-origin: top left;
            position: relative;
        }
        .cell {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 6px;
            border-radius: 8px;
            overflow: hidden;
            transition: transform .14s ease, box-shadow .14s;
            font-weight: 700;
            min-width: var(--cell-size);
            min-height: var(--cell-size);
            cursor: pointer;
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
        }
        .cell.hidden .word {
            opacity: 0.06;
            color: transparent;
        }
        .cell.visible .word {
            opacity: 1;
            transform: translateY(0);
        }
        .cell .meta-num {
            position: absolute;
            top: 6px;
            left: 6px;
            font-size: 11px;
            opacity: 0.95;
            text-align: left;
            line-height: 1;
        }
        .cell .meta-letter {
            position: absolute;
            top: 22px;
            left: 6px;
            font-size: 12px;
            opacity: 0.95;
        }
        .cell .meta-tower {
            position: absolute;
            top: 6px;
            right: 6px;
            font-size: 11px;
            opacity: 0.95;
        }
        .cell .word {
            font-size: 18px;
            padding: 2px 4px;
            transition: all .12s;
            display: block;
            direction: rtl;
            z-index: 2;
        }
        .cell .gematria {
            position: absolute;
            bottom: 6px;
            left: 6px;
            right: 6px;
            font-size: 12px;
            z-index: 2;
        }
        .extras {
            position: absolute;
            bottom: 10px;
            right: 6px;
            left: 6px;
            font-size: 10px;
            line-height: 1.2;
            z-index: 2;
            text-align: right;
        }
        .extras .part {
            opacity: 0.92;
            margin-bottom: 3px;
            display: flex;
            justify-content: space-between;
        }
        .extras .asm {
            font-weight: 800;
            color: #f5d08a;
        }
        .extras .surah {
            color: #a8d8ea;
        }
        .extras .day {
            opacity: 0.9;
        }
        .extras .kh {
            opacity: 0.85;
        }
        .extras .asm-num {
            color: #ffa07a;
            margin-left: 5px;
        }
        .c-red {
            background: #e74c3c;
            color: #fff;
            border: 3px solid #c43b31;
        }
        .c-black {
            background: var(--dark-tile);
            color: #fff;
            border: 2px solid #000;
        }
        .c-white {
            background: var(--light-tile);
            color: #000;
            border: 2px solid #bbb;
        }
        .spec-0 {
            background: #FF1744;
            color: #fff;
        }
        .spec-1 {
            background: #FF9100;
            color: #000;
        }
        .spec-2 {
            background: #FFD600;
            color: #000;
        }
        .spec-3 {
            background: #00C853;
            color: #fff;
        }
        .spec-4 {
            background: #00B0FF;
            color: #000;
        }
        .spec-5 {
            background: #651FFF;
            color: #fff;
        }
        .spec-6 {
            background: #D500F9;
            color: #fff;
        }
        .zodiac-fire {
            color: #FFD700;
        }
        .zodiac-earth {
            color: #FFFFFF;
        }
        .zodiac-air {
            color: #000000;
        }
        .zodiac-water {
            color: #1E90FF;
        }
        .small-note {
            font-size: 11px;
            color: var(--muted);
        }
        .sidepanel {
            width: 360px;
            max-width: 38vw;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .status {
            padding: 10px;
            background: #081018;
            border-radius: 8px;
            color: var(--muted);
        }
        .slider-row {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .footer {
            font-size: 13px;
            color: var(--muted);
            text-align: center;
            margin-top: 6px;
        }
        .row-numbers {
            position: absolute;
            right: 0;
            top: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 6px;
            pointer-events: none;
            user-select: none;
            z-index: 10;
        }
        .row-numbers div {
            font-size: 12px;
            opacity: 0.95;
            min-width: 20px;
            text-align: center;
        }
        .house-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        .house-container {
            background: #0b0f12;
            border-radius: 16px;
            padding: 30px;
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 0 30px rgba(231, 76, 60, 0.5);
            border: 2px solid #e74c3c;
            position: relative;
        }
        .house-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #2c3e50;
        }
        .house-header h2 {
            font-size: 28px;
            margin: 0;
            color: #e74c3c;
        }
        .house-header .house-number {
            font-size: 60px;
            font-weight: bold;
            color: #e74c3c;
            margin: 10px 0;
            line-height: 1;
        }
        .house-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .house-info {
            background: #071018;
            border-radius: 12px;
            padding: 20px;
        }
        .house-info h3 {
            color: #f39c12;
            margin-top: 0;
            border-bottom: 1px solid #34495e;
            padding-bottom: 10px;
        }
        .info-item {
            margin-bottom: 12px;
        }
        .info-item strong {
            color: #3498db;
            display: block;
            margin-bottom: 6px;
        }
        .info-item p {
            margin: 0;
            color: #ecf0f1;
            line-height: 1.6;
        }
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
        }
        .panel-card {
            background: #081018;
            border: 1px solid #122028;
            border-radius: 12px;
            padding: 12px;
        }
        .table-container {
            margin-top: 8px;
            width: 100%;
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            display: none;
            background: #0f1722;
            border-radius: 8px;
            overflow: hidden;
        }
        table.active {
            display: table;
        }
        th,
        td {
            padding: 10px;
            border: 1px solid #1b2834;
            text-align: center;
            font-size: 12px;
            color: #e7eef5;
        }
        th {
            background-color: #11202c;
            color: #cfe4ff;
        }
        .ref-note {
            font-size: 12px;
            color: #9fb3c8;
            margin-top: 8px;
        }
        ::selection {
            background: rgba(231, 76, 60, 0.5);
            color: #fff;
        }
        ::-moz-selection {
            background: rgba(231, 76, 60, 0.5);
            color: #fff;
        }
        .text-selected {
            background-color: rgba(231, 76, 60, 0.3) !important;
            transition: background-color 0.3s ease;
        }
        .geometry {
            position: absolute;
            bottom: 4px;
            right: 6px;
            font-size: var(--symbol-size);
            color: var(--symbol-color);
            z-index: 4;
        }
        .cosmic-tag {
            position: absolute;
            top: 4px;
            left: 4px;
            font-size: 8px;
            background-color: rgba(52, 152, 219, 0.7);
            color: white;
            padding: 1px 3px;
            border-radius: 3px;
            z-index: 5;
        }
        .symbol-1::after { content: "โข"; }
        .symbol-2::after { content: "โ"; }
        .symbol-3::after { content: "โณ"; }
        .symbol-4::after { content: "โก"; }
        .symbol-5::after { content: "โ"; }
        .symbol-6::after { content: "โฌก"; }
        .symbol-7::after { content: "โ"; }
        .symbol-8::after { content: "โ"; }
        .symbol-9::after { content: "ยง"; }
        .rumal-pattern {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-top: 2px;
        }
        .rumal-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #fff;
        }
        .rumal-dot.double {
            width: 10px;
        }
        .tafaq-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 4px;
        }
        @media (max-width: 1000px) {
            .sidepanel {
                width: 100%;
            }
            textarea {
                width: 100%;
            }
            .house-content {
                grid-template-columns: 1fr;
            }
        }
        @media (max-width: 768px) {
            .house-header .house-number {
                font-size: 50px;
            }
            .house-header h2 {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div>
            <div class="title">ููุญุฉ ุฃุณูุงุก ุงููู ุงูุญุณูู ูุน ุชูุงูู ุนููู ุงูุฑูู ูุงููููุฒ ูุงูุฃุณุฑุงุฑ</div>
            <div class="small-note">ุงูุชุฑุชูุจ ุฏุงุฎู ุงููุฑุจุนุงุช: ูู ุงูุฃุนูู ููุฃุณููุ ููู ูู ุตู ูู ุงููููู ุฅูู ุงูุดูุงู</div>
            <div class="small-note">ุงุถุบุท ูุฑุชูู ุนูู ุฃู ูุฑุจุน ูุนุฑุถ ุชูุงุตูู ุงูููุฒูุฉ ุงูููุฑูุฉ ูุงูุฎุงุชู ุงูุณูููุงูู</div>
            <div class="small-note">ุงุถุบุท ุจุฒุฑ ุงููุงูุณ ุงูุฃููู ูุชุญุฏูุฏ ุงููุต ุซู ุงุถุบุท ูุฑุฉ ุฃุฎุฑู ููุณุฎู</div>
        </div>
        <div class="controls">
            <button class="btn btn-main" id="btnLoad">ุชุญููู ุงููุต</button>
            <button class="btn btn-ghost" id="btnReset">ุฅุนุงุฏุฉ ุถุจุท</button>
            <button class="btn" id="btnRandom">ุชูููู ุนุดูุงุฆู</button>
            <button class="btn btn-spectrum" id="btnSpectrum">ุฃููุงู ุงูุทูู</button>
            <button class="btn" id="btnPrev">ุงูุฑุฌูุน</button>
            <button class="btn btn-main" id="btnNext">ุงูุชุงูู</button>
            <button class="btn" id="btnSubmit" style="background: #2ecc71">ุงูุชูุฏูู</button>
            <button class="btn" id="btnExtractMessage" style="background: #3498db">ุงุณุชุฎุฑุงุฌ ุงูุฑุณุงูุฉ</button>
        </div>
    </div>
    <div class="wrapper">
        <div class="board-wrap">
            <div style="display: flex; gap: 10px; align-items: center;">
                <div class="slider-row">
                    <label class="small-note">ุญุฌู ุงูุฎุงูุฉ:</label>
                    <input type="range" id="sizeRange" min="40" max="2500" value="80" />
                    <span id="sizeValue" class="small-note">80px</span>
                </div>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <label class="small-note">ูุถุน ุงููุดู:</label>
                    <select id="mode">
                        <option value="hover">ูุดู ุจุงูุญุฑูุฉ</option>
                        <option value="click">ูุดู ุจุงูููุฑ</option>
                        <option value="manual">ูุฏูู (ุงูุชุงูู/ุงูุฑุฌูุน)</option>
                    </select>
                </div>
            </div>
            <div class="grid" id="grid" aria-label="ููุญุฉ 8ร8"></div>
            <div class="row-numbers" id="rowNumbers"></div>
            <div style="display: flex; gap: 10px; align-items: center; margin-top: 6px;">
                <div class="small-note">ุนูุฏ ุงููุฑูุฑ ุจุงููุฃุฑุฉ ุฃู ุงูุชูุฏูู ุณุชูุนุฑุถ ุงููููุงุช ุจุงูุชุชุงุจุน</div>
            </div>
        </div>
        <div class="sidepanel">
            <label class="small-note">ุฃุฏุฎู ุงููุต (ูู ูููุฉ ููุตููุฉ ุจูุณุงูุฉ ุฃู ุณุทุฑ):</label>
            <textarea id="textInput" placeholder="ุฃูุตู ูุตูู ููุง..."></textarea>
            <div style="display: flex; gap: 8px;">
                <button class="btn btn-main" id="btnLoadFromInput">ุชุญููู ูู ุงูุญูู</button>
                <button class="btn btn-ghost" id="btnFillDemo">ููุฃ ุชุฌุฑูุจู</button>
            </div>
            <div class="status">
                <div>ูููุดูู: <span id="revealedCount">0</span> / 64</div>
                <div style="margin-top: 6px">ุงููููุฉ ุงูุญุงููุฉ: <span id="currentWord">โ</span></div>
                <div style="margin-top: 6px" class="small-note">ุงูุญุฑูู ุงูุฃุจุฌุฏูุฉ ุงููุนุชูุฏุฉ ุชุญุช ุงูุฑูู: ุงูุฃูู โ ุงูุจุงุก โ ุงูุชุงุก ... ุซู ุชุนุงุฏ ูู 28 ุญุฑูุงู</div>
                <div style="margin-top: 6px" class="small-note">ุงูุจุฑุฌ: ุฑูู ูู 1 ุฅูู 12 ููุนุงุฏ ูู ุฌุฏูุฏ ุจุนุฏ 12</div>
                <div style="margin-top: 6px" class="small-note">ุงุถุบุท ูุฑุชูู ุนูู ุฃู ูุฑุจุน ูุนุฑุถ ุงูููุฒูุฉ ุงูููุฑูุฉ ูุงูุฎุงุชู ุงูุณูููุงูู</div>
                <div style="margin-top: 6px" class="small-note">ุงุถุบุท ุจุฒุฑ ุงููุงูุณ ุงูุฃููู ูุชุญุฏูุฏ ุงููุต ุซู ุงุถุบุท ูุฑุฉ ุฃุฎุฑู ููุณุฎู</div>
            </div>
            <div class="panel-card">
                <div style="font-weight: 700; margin-bottom: 6px">๐ ูููุฏ ุงูุฑุณุงุฆู ุงูููุฑูุฉ ุงููุชูุฏู</div>
                <div class="small-note" style="margin-bottom: 6px">ุงุฎุชุฑ ุงูุชุงุฑูุฎ ูุชุญููู ุงูููุฒูุฉ ุงูููุฑูุฉ (ุงูุฏูุฑุฉ ูุจููุฉ ุนูู 28 ูููุงู ุงุนุชุจุงุฑุงู ูู 2024-04-07)</div>
                <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap">
                    <input type="date" id="dateInput" value="2024-04-07">
                    <button class="btn" id="btnAnalyze" style="background: #00b894">ุชุญููู ุงูููุฒูุฉ</button>
                    <button class="btn btn-ghost" id="btnToggleTables">ุชุจุฏูู ุงูุฌุฏุงูู</button>
                </div>
                <div id="output" class="small-note" style="margin-top: 10px"></div>
                <div class="table-container">
                    <table id="mainTable" class="active">
                        <thead>
                            <tr>
                                <th>ุงูููู</th>
                                <th>ุงูููุฒูุฉ</th>
                                <th>ุงูุญุฑู</th>
                                <th>ุงูุฒุงููุฉ</th>
                                <th>ุงูุฏูุงูุฉ</th>
                            </tr>
                        </thead>
                        <tbody id="mansionBody"></tbody>
                    </table>
                    <table id="abumasharTable">
                        <thead>
                            <tr>
                                <th>ุงูููุฒูุฉ</th>
                                <th>ุงูุฏุฑุฌุฉ</th>
                                <th>ุงูุญุฑู ุงูุณุฑู</th>
                                <th>ุงูุฎุงุตูุฉ ุงูุฑูุญุงููุฉ</th>
                            </tr>
                        </thead>
                        <tbody id="abumasharBody"></tbody>
                    </table>
                </div>
                <div class="ref-note">
                    ููุนูููุงุช ุฃูุซุฑ ุชูุตููุงูุ ูู ุจุฒูุงุฑุฉ:
                    <a href="https://kharta.website/%D8%A7%D9%84%D8%AE%D8%A7%D8%B1%D8%B7%D8%A9-%D8%A7%D9%84%D9%81%D9%84%D9%83%D9%8A%D8%A9/" target="_blank" rel="noopener">ุงููุฑูุฒ ุงููููู ุงูุนุงููู</a>
                </div>
            </div>
            <div class="panel-card">
                <div style="font-weight: 700; margin-bottom: 6px">๐ ูุซูุซ ุงูุบุฒุงูู</div>
                <div class="small-note" style="margin-bottom: 6px">ุงููุฑุจุน ุงูุณุญุฑู 3x3 ุญูุซ ูุฌููุน ูู ุตู/ุนููุฏ/ูุทุฑ = 15</div>
                <div id="ghazaliTriangle" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 4px; margin-top: 10px;"></div>
                <div class="small-note" style="margin-top: 6px; text-align: center;">8 1 6<br>3 5 7<br>4 9 2</div>
                <div class="small-note" style="margin-top: 6px;">
                    <strong>ุงูุดุฑุญ:</strong> ูุซูุซ ุงูุบุฒุงูู ูู ูุฑุจุน ุณุญุฑู 3ร3 ูููุณุจ ุฅูู ุงูุฅูุงู ุงูุบุฒุงููุ 
                    ุญูุซ ูุฌููุน ูู ุตู ูุฃุนูุฏุฉ ูุฃูุทุงุฑ ูุณุงูู 15. ููุณุชุฎุฏู ูู ุงูุนููู ุงูุจุงุทููุฉ ูุฌุฐุจ ุงูุจุฑูุฉ 
                    ูุชูุฑูุฌ ุงููุฑูุจุ ููุนุชุจุฑ ุฃุณุงุณุงู ูุนูู ุงูุงููุงู. ุชูุซู ุงูุฃุนุฏุงุฏ ูู ุงููุซูุซ ุชูุงุฒู ุงูููู ุงูููููุฉ 
                    ูุชูุงุณููุงุ ุญูุซ ุงูุนุฏุฏ 5 ูู ุงููุณุท ูุฑูุฒ ุฅูู ุงูุชูุญูุฏ ูุงููุฑูุฒูุฉ ุงูุฅูููุฉ.
                </div>
            </div>
            <div style="background: #071018; padding: 8px; border-radius: 8px; margin-top: 8px;">
                <div style="font-weight: 700; margin-bottom: 6px">ูุงุฆูุฉ ุฃููุงู ุงูุทูู (ูุน ุงูุณุฑ/ุงูุญููุฉ)</div>
                <div id="rainbowLegend" class="small-note"></div>
            </div>
            <div class="panel-card">
                <div style="font-weight: 700; margin-bottom: 6px">ุนูู ุงูุฑูู ูุฃุดูุงูู ุงูู 16</div>
                <div id="rumalForms" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-top: 8px;"></div>
                <div class="small-note" style="margin-top: 10px;">
                    <strong>ุดุฑุญ ุนูู ุงูุฑูู:</strong> ุนูู ุงูุฑูู ูู ุฃุญุฏ ุนููู ุงูุบูุจ ุงูุฐู ูุณุชุฎุฏู ููู ุงูุฑุณู ุนูู ุงูุฑูู 
                    ุฃู ุงููุฑู ูุงุณุชุฎุฑุงุฌ ุฃุญูุงู ูุฃุณุฑุงุฑ. ูุนุชูุฏ ุนูู 16 ุดููุงู ุฃุณุงุณูุงู (ุจูุชุงู)ุ ูู ุจูุช ูุชุฃูู ูู 4 ุฃุนูุฏุฉุ 
                    ููู ุนููุฏ ูุญุชูู ุนูู 1 ุฃู 2 ููุทุฉ. ุชูุณุชุฎุฏู ูุฐู ุงูุฃุดูุงู ููุชูุจุค ูุนูุงุฌ ุงููุณ ูุงููุฑุงุกุฉ. ูู ูู ุฎุงูุฉ ูู ุงูููุญุฉ 
                    ุชุธูุฑ ุฃุฑูุงู ุงูุฑูู ุงูููุงุจูุฉ ูุน ุดุฑุญ ุฎูุงุฑุฒููุฉ ุงูุญุณุงุจ ูุฑุจุทูุง ุจุงูููุฒูุฉ ุงูููุฑูุฉ.
                </div>
            </div>
            <div class="panel-card">
                <div style="font-weight: 700; margin-bottom: 6px">ุนููู ุงูุชุงูุงู</div>
                <div id="tafaqExplanation" class="small-note">
                    <strong>ุงูุชุงูุงู:</strong> ูู ุนูู ูุฏุฑุณ ุงูุชูุงูู ุจูู ุงูุฃุฑูุงู ูุงูุฃุณูุงุก ูุงูุฃุฌุฑุงู ุงูุณูุงููุฉ. 
                    ูุนุชูุฏ ุนูู ูุจุฏุฃ ุฃู ูู ุดูุก ูู ุงููุฌูุฏ ูู ุฑูู ูุฑุชุจุท ุจูุ ููุฐู ุงูุฃุฑูุงู ุชุชูุงุนู ูุน ุจุนุถูุง ุงูุจุนุถ 
                    ูุชูุชุฌ ุชูุงููุงู ุฃู ุชุนุงุฑุถุงู. ุงูุชุงูุงู ููุณุชุฎุฏู ูู ุชุญุฏูุฏ ุงูุฃููุงุช ุงูููุงุณุจุฉ ููุฃุนูุงูุ ูุงุฎุชูุงุฑ ุงูุฃุณูุงุกุ 
                    ูุชุญููู ุงูุดุฎุตูุงุช. ูู ูู ุฎุงูุฉ ูู ุงูููุญุฉ ุชุธูุฑ ุฃุฑูุงู ุงูุชุงูุงู ูุน ุดุฑุญ ุฎูุงุฑุฒููุฉ ุงูุญุณุงุจ ูุฑุจุทูุง 
                    ุจุงูููุฒูุฉ ุงูููุฑูุฉ ูุงูุฎุงุชู ุงูุณูููุงูู.
                </div>
                <div style="margin-top: 10px; display: flex; flex-direction: column; gap: 5px;" id="tafaqColors">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span class="tafaq-indicator" style="background-color: #e74c3c;"></span>
                        <span>ุงูุชูุงู ุงููุงุฑู: ููููุฉ ูุงููุดุงุท</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span class="tafaq-indicator" style="background-color: #f39c12;"></span>
                        <span>ุงูุชูุงู ุงูุชุฑุงุจู: ููุงุณุชูุฑุงุฑ ูุงูุจูุงุก</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span class="tafaq-indicator" style="background-color: #f1c40f;"></span>
                        <span>ุงูุชูุงู ุงูููุงุฆู: ููุชูุงุตู ูุงูุชูููุฑ</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span class="tafaq-indicator" style="background-color: #2ecc71;"></span>
                        <span>ุงูุชูุงู ุงููุงุฆู: ููุนุงุทูุฉ ูุงูุดูุงุก</span>
                    </div>
                </div>
            </div>
            <div class="panel-card">
                <div style="font-weight: 700; margin-bottom: 6px">ุงูุฑุณุงูุฉ ูู ุงููููุฒ ูุงูุฃุณุฑุงุฑ</div>
                <div id="treasureMessage" class="small-note" style="min-height: 100px; padding: 10px; background: #09121a; border-radius: 8px;">
                    <em>ุงุถุบุท ุนูู ุฒุฑ "ุงุณุชุฎุฑุงุฌ ุงูุฑุณุงูุฉ" ูุนุฑุถ ุงูุฑุณุงูุฉ ุงููุณุชุฎูุตุฉ ูู ุงูุจูุงุทุงุช ุงูููุดููุฉ</em>
                </div>
                <div class="small-note" style="margin-top: 10px;">
                    <strong>ุดุฑุญ ุฎูุงุฑุฒููุฉ ุงุณุชุฎุฑุงุฌ ุงูุฑุณุงูุฉ:</strong> ุชุนุชูุฏ ูุฐู ุงูุฎูุงุฑุฒููุฉ ุนูู ุชุญููู ุงูููู ุงูุนุฏุฏูุฉ 
                    ููุจูุงุทุงุช ุงูููุดููุฉ ูุฑุจุทูุง ุจุนูู ุงูุฑูู ูุงูููุฒูุฉ ุงูููุฑูุฉ ูุงูุชูุงู. ูุชู ุฌูุน ุงูููู ูุชุญููููุง 
                    ุจุงุณุชุฎุฏุงู ูุนุงุฏูุงุช ุฑูุงุถูุฉ ูุฑูุญุงููุฉ ูุงุณุชุฎุฑุงุฌ ุงูุฑุณุงูุฉ ุงูุณุฑูุฉ ุงููุฎููุฉ ูู ุงููููุฒ.
                </div>
            </div>
        </div>
    </div>
    <div class="footer">ููููู ุชูุจูุฑ ุงูููุญุฉ ุญุชู 2500px. ุงูุนูุงุตุฑ ุงูุตุบูุฑุฉ (ุฑูู ุงููุฑุจุนุ ุงูุญุฑู ุงูุฃุจุฌุฏูุ ุงูุจุฑุฌ) ุซุงุจุชุฉ ูู ูู ูุฑุจุน. ุชูุช ุฅุถุงูุฉ ุฃุณูุงุก ุงููู ุงูุญุณูู ูุฏูุฑุฉ ุฃูุงู ุงูุฃุณุจูุน (1โ7) ูุชูุงูู ูููุฏ ุงูููุงุฒู ุงูููุฑูุฉ ูุงูุฎุงุชู ุงูุณูููุงูู ูุน ุนูู ุงูุงููุงู ูุงูุฑูู ููุซูุซ ุงูุบุฒุงูู ูุนููู ุงูุชุงูุงู ูุงูุฑุณุงูุฉ ูู ุงููููุฒ ูุงูุฃุณุฑุงุฑ.</div>
    <div id="houseModal" class="house-modal" style="display: none;">
        <div class="house-container">
            <div class="house-header">
                <h2 id="modalHouseName">ุงูููุฒู ุงูููุฑู</h2>
                <div class="house-number" id="modalHouseNumber">1</div>
            </div>
            <div class="house-content">
                <div class="house-info">
                    <h3>ูุนูููุงุช ุงูููุฒู</h3>
                    <div class="info-item">
                        <strong>ุงูุญุฑู ุงูุฃุจุฌุฏู</strong>
                        <p id="modalHouseLetter">ุฃ</p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุจุฑุฌ ุงููููู</strong>
                        <p id="modalHouseZodiac">ุงูุญูู (1) - ูุงุฑู</p>
                    </div>
                    <div class="info-item">
                        <strong>ูููุฉ ุงูุฌูู</strong>
                        <p id="modalHouseGematria">1</p>
                    </div>
                    <div class="info-item">
                        <strong>ุนุฏุฏ ุงูุฏูุฑุงุช</strong>
                        <p id="modalHouseCycle">1</p>
                    </div>
                    <div class="info-item">
                        <strong>ุงุณู ุงูููุฒูุฉ (ูู ุงูุฌุฏูู ุงููุชูุฏู)</strong>
                        <p id="modalMansionName">ุงูุดุฑุทุงู</p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุญุฑู ุงููููู</strong>
                        <p id="modalMansionLetter">ุฃ</p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุฒุงููุฉ ุงูููุฑูุฉ</strong>
                        <p id="modalMansionAngle">0ยฐ</p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุฏูุงูุฉ</strong>
                        <p id="modalMansionMeaning">ุจุฏุงูุฉ ุงููุดุงุฑูุน ุงูุฌุฏูุฏุฉ</p>
                    </div>
                </div>
                <div class="house-info">
                    <h3>ุฎุตุงุฆุต ุงูููุฒู</h3>
                    <div class="info-item">
                        <strong>ุงูุทุงูุฉ</strong>
                        <p id="modalHouseEnergy">ุนุงููุฉุ ุจุฏุงูุฉ ุฌุฏูุฏุฉุ ุทุงูุฉ ูุชุฌุฏุฏุฉ</p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุชุฃุซูุฑ</strong>
                        <p id="modalHouseInfluence">ูููุญ ุงูููุฉ ูุงูุนุฒููุฉ ูุจุฏุก ุงููุดุงุฑูุน</p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูููุงุฆุฏ</strong>
                        <p id="modalHouseBenefits">ุงูุชุฎุทูุทุ ุงูุจุฏุงูุงุช ุงูุฌุฏูุฏุฉุ ุงูููุงุฏุฉ</p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุชุญุฏูุงุช</strong>
                        <p id="modalHouseChallenges">ุงูุงูุฏูุงุน ุงูุฒุงุฆุฏุ ููุฉ ุงูุตุจุฑ</p>
                    </div>
                </div>
                <div class="house-info" style="grid-column: span 2;">
                    <h3>ุงูุฎุงุชู ุงูุณูููุงูู</h3>
                    <div class="info-item">
                        <strong>ุญุฑู ุงูุญุฑุจ</strong>
                        <p id="modalSealWar"></p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุทูุณู</strong>
                        <p id="modalSealTalisman"></p>
                    </div>
                    <div class="info-item">
                        <strong>ููุฉ ุงูุญุฑู</strong>
                        <p id="modalSealLetterPower"></p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุฃุณูุงุก ุงูุนุฑุจูุฉ</strong>
                        <p id="modalSealArabicNames"></p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุฃุณูุงุก ุงูุณุฑูุงููุฉ</strong>
                        <p id="modalSealSyriacNames"></p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุฃูุงู</strong>
                        <p id="modalSealDays"></p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุฏุฑุงุฑู (ุงููุฌูู)</strong>
                        <p id="modalSealStars"></p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุชูุงุตู</strong>
                        <p id="modalSealAdhesives"></p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุฃุนูุงู ุงูุฃุฑุถูุฉ</strong>
                        <p id="modalSealEarthlyHelpers"></p>
                    </div>
                    <div class="info-item">
                        <strong>ุงููููู ุงูุนูููุฉ</strong>
                        <p id="modalSealHeavenlyKings"></p>
                    </div>
                </div>
                <div class="house-info">
                    <h3>ุนูู ุงูุฑูู ุงููุฑุชุจุท</h3>
                    <div class="info-item">
                        <strong>ุงูุดูู ุงูุฑููู</strong>
                        <p id="modalRumalForm">ุงูุญูู</p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูููุท</strong>
                        <div id="modalRumalPattern" class="rumal-pattern"></div>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุฏูุงูุฉ</strong>
                        <p id="modalRumalMeaning">ุจุฏุงูุฉ ุฌุฏูุฏุฉุ ููุฉุ ุทููุญ</p>
                    </div>
                </div>
                <div class="house-info">
                    <h3>ุงูุชูุงู ุงูุฃุฑูุงู</h3>
                    <div class="info-item">
                        <strong>ุงูุฌูู ุงููุจูุฑ</strong>
                        <p id="modalTafaqBig">0</p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุฌูู ุงูุตุบูุฑ</strong>
                        <p id="modalTafaqSmall">0</p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุฌูู ุงูุฃูุณุท</strong>
                        <p id="modalTafaqMiddle">0</p>
                    </div>
                    <div class="info-item">
                        <strong>ุฑูู ุงูุชูุงู</strong>
                        <p id="modalTafaqNumber">0</p>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุฏูุงูุฉ</strong>
                        <p id="modalTafaqMeaning">ูุง ููุฌุฏ ุชูุงู</p>
                    </div>
                </div>
            </div>
        </div>
        <button class="close-modal" id="closeHouseModal">&times;</button>
    </div>
    <script>
        /* ---------- ุฅุนุฏุงุฏ ุงูุจูุงูุงุช ุงูุซุงุจุชุฉ ---------- */
        const arabicLetters = ["ุฃ", "ุจ", "ุช", "ุซ", "ุฌ", "ุญ", "ุฎ", "ุฏ", "ุฐ", "ุฑ", "ุฒ", "ุณ", "ุด", "ุต", "ุถ", "ุท", "ุธ", "ุน", "ุบ", "ู", "ู", "ู", "ู", "ู", "ู", "ูู", "ู", "ู"];
        const abjadMap = {
            "ุง": 1, "ุฃ": 1, "ุฅ": 1, "ุข": 1, "ุจ": 2, "ุฌ": 3, "ุฏ": 4, "ู": 5, "ุฉ": 5, "ู": 6, "ุฒ": 7, "ุญ": 8, "ุท": 9,
            "ู": 10, "ู": 10, "ู": 20, "ู": 30, "ู": 40, "ู": 50, "ุณ": 60, "ุน": 70, "ู": 80, "ุต": 90, "ู": 100,
            "ุฑ": 200, "ุด": 300, "ุช": 400, "ุซ": 500, "ุฎ": 600, "ุฐ": 700, "ุถ": 800, "ุธ": 900, "ุบ": 1000
        };
        
        // โจ ุชุนุฑูู ุฃุดูุงู ุงูุฑูู ุงูู 16
        const RUMAL_FORMS = [
            { name: "ุงูุญูู", pattern: [1, 1, 1, 1], meaning: "ุจุฏุงูุฉ ุฌุฏูุฏุฉุ ููุฉุ ุทููุญ", color: "#e74c3c" },
            { name: "ุงูุซูุฑ", pattern: [2, 1, 1, 1], meaning: "ุงุณุชูุฑุงุฑุ ุตุจุฑุ ูุซุงุจุฑุฉ", color: "#f39c12" },
            { name: "ุงูุฌูุฒุงุก", pattern: [1, 2, 1, 1], meaning: "ุงุชุตุงูุ ุชูุงุตูุ ุชุนูู", color: "#f1c40f" },
            { name: "ุงูุณุฑุทุงู", pattern: [2, 2, 1, 1], meaning: "ุนุงุทูุฉุ ุฐุงูุฑุฉุ ุญูุงูุฉ", color: "#2ecc71" },
            { name: "ุงูุฃุณุฏ", pattern: [1, 1, 2, 1], meaning: "ููุงุฏูุฉุ ุฅุจุฏุงุนุ ุซูุฉ", color: "#1abc9c" },
            { name: "ุงูุนุฐุฑุงุก", pattern: [2, 1, 2, 1], meaning: "ุชูุธููุ ุชุญูููุ ุฏูุฉ", color: "#3498db" },
            { name: "ุงูููุฒุงู", pattern: [1, 2, 2, 1], meaning: "ุชูุงุฒูุ ุนุฏุงูุฉุ ุฏุจูููุงุณูุฉ", color: "#9b59b6" },
            { name: "ุงูุนูุฑุจ", pattern: [2, 2, 2, 1], meaning: "ููุฉุ ุชุญููุ ุบููุถ", color: "#e74c3c" },
            { name: "ุงูููุณ", pattern: [1, 1, 1, 2], meaning: "ุงุณุชูุดุงูุ ุชูุงุคูุ ุญููุฉ", color: "#f39c12" },
            { name: "ุงูุฌุฏู", pattern: [2, 1, 1, 2], meaning: "ุทููุญุ ุงูุถุจุงุทุ ูุฌุงุญ", color: "#f1c40f" },
            { name: "ุงูุฏูู", pattern: [1, 2, 1, 2], meaning: "ุงุจุชูุงุฑุ ุชุญุฑุฑุ ุชูุฏู", color: "#2ecc71" },
            { name: "ุงูุญูุช", pattern: [2, 2, 1, 2], meaning: "ุญุฏุณุ ุฅุจุฏุงุนุ ุฑูุญุงููุฉ", color: "#1abc9c" },
            { name: "ุงูุดูุณ", pattern: [1, 1, 2, 2], meaning: "ููุฑุ ุญูููุฉุ ุงูุชุตุงุฑ", color: "#3498db" },
            { name: "ุงูููุฑ", pattern: [2, 1, 2, 2], meaning: "ุญุฏุณุ ุชุฃุซูุฑุ ุชุบููุฑ", color: "#9b59b6" },
            { name: "ุงููุฌู", pattern: [1, 2, 2, 2], meaning: "ุฅููุงูุ ุชุฃููุ ุชูุฌูู", color: "#e74c3c" },
            { name: "ุงูุณูู", pattern: [2, 2, 2, 2], meaning: "ุญุณูุ ููุฉุ ุชุญุฏู", color: "#f39c12" }
        ];
        
        // โจ ุชุนุฑูู ูุซูุซ ุงูุบุฒุงูู (ุงููุฑุจุน ุงูุณุญุฑู 3x3)
        const AL_GHAZALI_TRIANGLE = [
            [8, 1, 6],
            [3, 5, 7],
            [4, 9, 2]
        ];
        
        // โจ ุชุนุฑูู ูุชุณูุณูุฉ ููุจููุงุชุดู (64 ุนูุตุฑุงู)
        const generateFibonacci = (n) => {
            let fib = [0, 1];
            for (let i = 2; i < n; i++) fib[i] = fib[i-1] + fib[i-2];
            return fib.slice(0, n);
        };
        const FIBONACCI_SEQUENCE = generateFibonacci(64);
        
        // โจ ุชุนุฑูู ุงูุฑููุฒ ุงูููุฏุณูุฉ
        const GEO_SYMBOLS = ["โข", "โ", "โณ", "โก", "โ", "โฌก", "โ", "โ", "ยง"];
        const GEO_SYMBOLS_MAP = {};
        FIBONACCI_SEQUENCE.forEach((num, idx) => {
            const reduced = (num.toString().split('').reduce((a, b) => (+a) + (+b), 0) - 1) % GEO_SYMBOLS.length;
            GEO_SYMBOLS_MAP[idx] = GEO_SYMBOLS[reduced >= 0 ? reduced : -reduced] || "โข";
        });
        
        const rainbow = [
            { cls: 'spec-0', color: '#FF1744', name: 'ุฃุญูุฑ', meaning: 'ุงูููุฉ ูุงูุญูุงุณ' },
            { cls: 'spec-1', color: '#FF9100', name: 'ุจุฑุชูุงูู', meaning: 'ุงูุฅุจุฏุงุน ูุงูุทุงูุฉ' },
            { cls: 'spec-2', color: '#FFD600', name: 'ุฃุตูุฑ', meaning: 'ุงูููุฑ ูุงููุนุฑูุฉ' },
            { cls: 'spec-3', color: '#00C853', name: 'ุฃุฎุถุฑ', meaning: 'ุงูุณูุงู ูุงูููู' },
            { cls: 'spec-4', color: '#00B0FF', name: 'ุฃุฒุฑู', meaning: 'ุงููุฏูุก ูุงูุญููุฉ' },
            { cls: 'spec-5', color: '#651FFF', name: 'ูููู', meaning: 'ุงูุฑูุญุงููุฉ ูุงูุชุฃูู' },
            { cls: 'spec-6', color: '#D500F9', name: 'ุจููุณุฌู', meaning: 'ุงูุตูุงุก ูุงูุฅููุงู' }
        ];
        
        const zodiacSigns = [
            { name: "ุงูุญูู", element: "ูุงุฑู" },
            { name: "ุงูุซูุฑ", element: "ุชุฑุงุจู" },
            { name: "ุงูุฌูุฒุงุก", element: "ููุงุฆู" },
            { name: "ุงูุณุฑุทุงู", element: "ูุงุฆู" },
            { name: "ุงูุฃุณุฏ", element: "ูุงุฑู" },
            { name: "ุงูุนุฐุฑุงุก", element: "ุชุฑุงุจู" },
            { name: "ุงูููุฒุงู", element: "ููุงุฆู" },
            { name: "ุงูุนูุฑุจ", element: "ูุงุฆู" },
            { name: "ุงูููุณ", element: "ูุงุฑู" },
            { name: "ุงูุฌุฏู", element: "ุชุฑุงุจู" },
            { name: "ุงูุฏูู", element: "ููุงุฆู" },
            { name: "ุงูุญูุช", element: "ูุงุฆู" }
        ];
        
        const elementColors = {
            "ูุงุฑู": "zodiac-fire",
            "ุชุฑุงุจู": "zodiac-earth",
            "ููุงุฆู": "zodiac-air",
            "ูุงุฆู": "zodiac-water"
        };
        
        const housesInfo = [
            { name: "ุจูุช ุงูููุฉ ูุงูููุฑ", energy: "ุนุงููุฉุ ุจุฏุงูุฉ ุฌุฏูุฏุฉุ ุทุงูุฉ ูุชุฌุฏุฏุฉ", influence: "ูููุญ ุงูููุฉ ูุงูุนุฒููุฉ ูุจุฏุก ุงููุดุงุฑูุน", benefits: "ุงูุชุฎุทูุทุ ุงูุจุฏุงูุงุช ุงูุฌุฏูุฏุฉุ ุงูููุงุฏุฉ", challenges: "ุงูุงูุฏูุงุน ุงูุฒุงุฆุฏุ ููุฉ ุงูุตุจุฑ" },
            { name: "ุจูุช ุงูุญููุฉ ูุงูุชูุงุฒู", energy: "ูุชูุงุฒูุฉุ ูุงุฏุฆุฉุ ุชุฃูููุฉ", influence: "ูุฒูุฏ ูู ุงูุญููุฉ ูุงูุชูููุฑ ุงูููุทูู", benefits: "ุงูุชุนููุ ุงูุชุฎุทูุท ุงูุงุณุชุฑุงุชูุฌูุ ุงูุญููุฉ", challenges: "ุงูููุงุทูุฉุ ุงูุฅูุฑุงุท ูู ุงูุชุญููู" },
            { name: "ุจูุช ุงูุชูุงุตู ูุงูุฅุจุฏุงุน", energy: "ุฅุจุฏุงุนูุฉุ ุชูุงุตููุฉุ ุงุฌุชูุงุนูุฉ", influence: "ูุนุฒุฒ ุงููุฏุฑุฉ ุนูู ุงูุชูุงุตู ูุงูุชุนุจูุฑ", benefits: "ุงูุฅุจุฏุงุนุ ุงููุชุงุจุฉุ ุงูุนูุงูุงุช", challenges: "ุงูุชุดุชุชุ ูุซุฑุฉ ุงูููุงู" },
            { name: "ุจูุช ุงูุงุณุชูุฑุงุฑ ูุงูุฃูุงู", energy: "ุซุงุจุชุฉุ ูุฑูุญุฉุ ุขููุฉ", influence: "ูููุฑ ุงูุงุณุชูุฑุงุฑ ูุงูุฃูุงู ุงูููุณู", benefits: "ุงูุงุณุชูุฑุงุฑุ ุจูุงุก ุงูุฃุณุฑุฉุ ุงูุฃูุงู", challenges: "ุงูุฎูู ูู ุงูุชุบููุฑุ ุงูุฌููุฏ" },
            { name: "ุจูุช ุงููุบุงูุฑุฉ ูุงูุชุบููุฑ", energy: "ุฏููุงููููุฉุ ูุบุงูุฑุฉุ ุชุบููุฑ", influence: "ูุดุฌุน ุนูู ุงููุบุงูุฑุฉ ูุชุฌุฑุจุฉ ุงูุฌุฏูุฏ", benefits: "ุงูุชุบููุฑุ ุงูุณูุฑุ ุงูุงูุชุดุงู", challenges: "ุงูุชููุฑุ ุนุฏู ุงูุงุณุชูุฑุงุฑ" },
            { name: "ุจูุช ุงูุนูู ูุงูุงูุถุจุงุท", energy: "ููุธูุฉุ ุนูููุฉุ ููุถุจุทุฉ", influence: "ูุนุฒุฒ ุงูุงูุถุจุงุท ูุงูุฅูุชุงุฌูุฉ", benefits: "ุงูุนููุ ุงููุธุงูุ ุงูุฅูุฌุงุฒ", challenges: "ุงูุฅุฑูุงูุ ุงูุฌููุฏ ูู ุงูุฑูุชูู" },
            { name: "ุจูุช ุงูุนูุงูุงุช ูุงูุดุฑุงูุงุช", energy: "ุงุฌุชูุงุนูุฉุ ุชุนุงูููุฉุ ุชูุงูููุฉ", influence: "ูุนุฒุฒ ุงูุนูุงูุงุช ูุงูุดุฑุงูุงุช ุงููุงุฌุญุฉ", benefits: "ุงูุฒูุงุฌุ ุงูุดุฑุงูุฉุ ุงูุตุฏุงูุฉ", challenges: "ุงูุชุจุนูุฉุ ููุฏุงู ุงููููุฉ" },
            { name: "ุจูุช ุงูุชุญูู ูุงูุนูู", energy: "ูุซููุฉุ ุชุญูููุฉุ ุนูููุฉ", influence: "ูุณุงุนุฏ ูู ุงูุชุญูู ุงูุดุฎุตู ูุงูููู", benefits: "ุงูุชุญููุ ุงูุดูุงุกุ ุงูุนูู ุงูููุณู", challenges: "ุงูุตุฏูุงุชุ ุงูุฎูู ูู ุงูุชุบููุฑ" },
            { name: "ุจูุช ุงูุญููุฉ ูุงูุชูุณุน", energy: "ููุณุนุฉุ ูุซุงููุฉุ ุญูููุฉ", influence: "ูุดุฌุน ุนูู ุงูุชูุณุน ุงูููุฑู ูุงูุฑูุญู", benefits: "ุงูุชุนูู ุงูุนุงููุ ุงูููุณูุฉุ ุงูุณูุฑ", challenges: "ุงูุงููุตุงู ุนู ุงููุงูุนุ ุงููุซุงููุฉ ุงูููุฑุทุฉ" },
            { name: "ุจูุช ุงููุณุคูููุฉ ูุงูุทููุญ", energy: "ุทููุญุฉุ ูุณุคููุฉุ ุนูููุฉ", influence: "ูุนุฒุฒ ุงูุทููุญ ูุงููุณุคูููุฉ", benefits: "ุงููุฌุงุญ ุงูููููุ ุงูุทููุญุ ุงูุฅูุฌุงุฒ", challenges: "ุงูุนูู ุงูุฒุงุฆุฏุ ุงูุฅููุงู ุงูุนุงุทูู" },
            { name: "ุจูุช ุงูุงุจุชูุงุฑ ูุงูุตุฏุงูุฉ", energy: "ุงุฌุชูุงุนูุฉุ ูุจุชูุฑุฉุ ูุฏูุฏุฉ", influence: "ูุดุฌุน ุนูู ุงูุงุจุชูุงุฑ ูุชูููู ุงูุตุฏุงูุงุช", benefits: "ุงูุตุฏุงูุงุชุ ุงูุงุจุชูุงุฑุ ุงูุนูู ุงูุฌูุงุนู", challenges: "ุงูุชุดุชุชุ ุนุฏู ุงูุงูุชุฒุงู" },
            { name: "ุจูุช ุงูุญุฏุณ ูุงูุฃุญูุงู", energy: "ุญุฏุณูุฉุ ุญุงููุฉุ ุฑูุญุงููุฉ", influence: "ูุนุฒุฒ ุงูุญุฏุณ ูุงูุชูุงุตู ูุน ุงูุฐุงุช ุงูุฏุงุฎููุฉ", benefits: "ุงูุฃุญูุงูุ ุงูุญุฏุณุ ุงูุฅุจุฏุงุน", challenges: "ุงููุฑูุจ ูู ุงููุงูุนุ ุงูุฅูุฑุงุท ูู ุงูุฃุญูุงู" },
            { name: "ุจูุช ุงูุงูุชูุงุก ูุงูุชุญูู", energy: "ุชุญูููุฉุ ููุงุฆูุฉุ ูุชุฌุฏุฏุฉ", influence: "ูุณุงุนุฏ ูู ุฅููุงุก ุงูุฏูุฑุงุช ูุงูุชุญูู", benefits: "ุงูุชุญููุ ุงูููุงูุงุชุ ุงูุชุฌุฏูุฏ", challenges: "ุงูููุงููุฉ ููุชุบููุฑุ ุงูุฎูู ูู ุงููุฌููู" },
            { name: "ุจูุช ุงูุชูุงุฒู ูุงูุงูุณุฌุงู", energy: "ูุชูุงุฒูุฉุ ูุชูุงุบูุฉุ ุณูููุฉ", influence: "ูุญูู ุงูุชูุงุฒู ูุงูุงูุณุฌุงู ุงูุฏุงุฎูู", benefits: "ุงูุณูุงู ุงูุฏุงุฎููุ ุงูุชูุงุฒูุ ุงูุงูุณุฌุงู", challenges: "ุงูุฎูููุ ุนุฏู ุงูุญุณู" },
            { name: "ุจูุช ุงูุชุญุฏู ูุงูููู", energy: "ุชุญุฏูุฉุ ูููุ ููุฉ", influence: "ูุดุฌุน ุนูู ููุงุฌูุฉ ุงูุชุญุฏูุงุช ูุงูููู", benefits: "ุงูุตููุฏุ ุงูููุฉุ ุงูุชุทูุฑ", challenges: "ุงูุตุฑุงุนุงุชุ ุงูุถุบุท ุงูููุณู" },
            { name: "ุจูุช ุงูุฅุจุฏุงุน ูุงููุฑุญ", energy: "ูุจูุฌุฉุ ุฅุจุฏุงุนูุฉุ ุฎูููุฉ", influence: "ูุนุฒุฒ ุงูุฅุจุฏุงุน ูุงููุฑุญ ุงูุฏุงุฎูู", benefits: "ุงูุฅุจุฏุงุนุ ุงููุฑุญุ ุงูุชุนุจูุฑ ุงูููู", challenges: "ุงูุณุทุญูุฉุ ุนุฏู ุงูุฌุฏูุฉ" },
            { name: "ุจูุช ุงููุนุฑูุฉ ูุงูุญูููุฉ", energy: "ุฐูููุฉุ ุชุญููููุฉุ ุตุงุฏูุฉ", influence: "ูุฒูุฏ ูู ุงูุจุญุซ ุนู ุงููุนุฑูุฉ ูุงูุญูููุฉ", benefits: "ุงูุชุนููุ ุงูุจุญุซุ ุงูุญููุฉ", challenges: "ุงูุดู ุงูููุฑุทุ ุงูุฌููุฏ ุงูููุฑู" },
            { name: "ุจูุช ุงูุชุบููุฑ ูุงูุชุญุฑุฑ", energy: "ุชุญุฑุฑูุฉุ ุชุบููุฑุ ุญุฑูุฉ", influence: "ูุณุงุนุฏ ูู ุงูุชุญุฑุฑ ูู ุงููููุฏ", benefits: "ุงูุญุฑูุฉุ ุงูุชุบููุฑุ ุงูุชุญุฑุฑ", challenges: "ุงูููุถูุ ุนุฏู ุงูุงุณุชูุฑุงุฑ" },
            { name: "ุจูุช ุงูููุงุฏุฉ ูุงูุณูุทุฉ", energy: "ููุงุฏูุฉุ ุณูุทููุฉุ ูููุฉ", influence: "ูุนุฒุฒ ุงูููุงุฏุฉ ูุงููุฏุฑุฉ ุนูู ุงูุชุฃุซูุฑ", benefits: "ุงูููุงุฏุฉุ ุงูุณูุทุฉุ ุงูุชุฃุซูุฑ", challenges: "ุงูุชุณูุทุ ุงูุบุฑูุฑ" },
            { name: "ุจูุช ุงูุญููุฉ ุงูุนูููุฉ", energy: "ุนูููุฉุ ุญูููุฉุ ุชุฃูููุฉ", influence: "ูุฒูุฏ ูู ุงูุญููุฉ ุงูุนูููุฉ ูุงูููู", benefits: "ุงูุญููุฉุ ุงูููู ุงูุนูููุ ุงูุชุฃูู", challenges: "ุงูุงูุนุฒุงูุ ุงูุฌููุฏ" },
            { name: "ุจูุช ุงูุชุนุจูุฑ ูุงูุฅููุงู", energy: "ุฅููุงููุฉุ ุชุนุจูุฑูุฉุ ูููุฉ", influence: "ูุนุฒุฒ ุงูุชุนุจูุฑ ุงูููู ูุงูุฅููุงู", benefits: "ุงูููุ ุงูุฅููุงูุ ุงูุชุนุจูุฑ", challenges: "ุงูุชููุจ ุงููุฒุงุฌูุ ุงูุญุณุงุณูุฉ ุงูููุฑุทุฉ" },
            { name: "ุจูุช ุงูุนูู ุงูุฌูุงุนู", energy: "ุฌูุงุนูุฉุ ุชุนุงูููุฉุ ุชูุงูููุฉ", influence: "ูุดุฌุน ุนูู ุงูุนูู ุงูุฌูุงุนู ูุงูุชุนุงูู", benefits: "ุงูุชุนุงููุ ุงูุนูู ุงูุฌูุงุนูุ ุงูุฏุนู", challenges: "ููุฏุงู ุงููููุฉ ุงููุฑุฏูุฉ" },
            { name: "ุจูุช ุงูุงุจุชูุงุฑ ูุงูุชุฌุฏูุฏ", energy: "ูุจุชูุฑุฉุ ุชุฌุฏูุฏูุฉุ ูุชุทูุฑุฉ", influence: "ูุนุฒุฒ ุงูุงุจุชูุงุฑ ูุงูุชุฌุฏูุฏ", benefits: "ุงูุงุจุชูุงุฑุ ุงูุชุฌุฏูุฏุ ุงูุชุทููุฑ", challenges: "ุงูุชุณุฑุนุ ุนุฏู ุงูุงูุชูุงู" },
            { name: "ุจูุช ุงูุญูุงูุฉ ูุงูุฑุนุงูุฉ", energy: "ุญุงููุฉุ ุฑุงุนูุฉุ ุฏุงุนูุฉ", influence: "ูููุฑ ุงูุญูุงูุฉ ูุงูุฑุนุงูุฉ", benefits: "ุงูุญูุงูุฉุ ุงูุฑุนุงูุฉุ ุงูุฏุนู", challenges: "ุงูุชุจุนูุฉุ ุงูุฎูู ูู ุงูุงุณุชููุงู" },
            { name: "ุจูุช ุงููุนุฑูุฉ ุงูููููุฉ", energy: "ููููุฉุ ุดููููุฉุ ุญูููุฉ", influence: "ูุฒูุฏ ูู ุงูููู ุงููููู ูุงูุญููุฉ", benefits: "ุงูุญููุฉ ุงูููููุฉุ ุงูููู ุงูุดูููู", challenges: "ุงูุงููุตุงู ุนู ุงููุงูุน ุงูุฃุฑุถู" },
            { name: "ุจูุช ุงูุชุญูู ุงูุฑูุญู", energy: "ุฑูุญุงููุฉุ ุชุญูููุฉุ ุนูููุฉ", influence: "ูุณุงุนุฏ ูู ุงูุชุญูู ุงูุฑูุญู", benefits: "ุงูููู ุงูุฑูุญูุ ุงูุชุญูู ุงูุฏุงุฎูู", challenges: "ุงููุฑูุจ ูู ุงููุณุคูููุงุช" },
            { name: "ุจูุช ุงูุฅุฑุงุฏุฉ ูุงูุชูููุฐ", energy: "ูููุฉุ ูููุฐุฉุ ุญุงุณูุฉ", influence: "ูุนุฒุฒ ุงูุฅุฑุงุฏุฉ ูุงููุฏุฑุฉ ุนูู ุงูุชูููุฐ", benefits: "ุงูุฅุฑุงุฏุฉุ ุงูุชูููุฐุ ุงูุฅูุฌุงุฒ", challenges: "ุงูุชุตูุจุ ุนุฏู ุงููุฑููุฉ" },
            { name: "ุจูุช ุงูุฅููุงู ูุงูุฏูุฑุฉ", energy: "ูุงููุฉุ ุฏุงุฆุฑูุฉุ ููุงุฆูุฉ", influence: "ูุฎุชุชู ุงูุฏูุฑุฉ ููุนุฏ ูุจุฏุงูุฉ ุฌุฏูุฏุฉ", benefits: "ุงูุฅููุงูุ ุงูุฎุชุงูุ ุงูุงุณุชุนุฏุงุฏ ููุฌุฏูุฏ", challenges: "ุงูุชุดุจุซ ุจุงููุงุถูุ ุงูุฎูู ูู ุงูุจุฏุงูุงุช" }
        ];
        
        const MOON_MANSIONS = [
            {
                name: "ุงูุดุฑุทุงู",
                letter: "ุฃ",
                angle: 0,
                meaning: "ุจุฏุงูุฉ ุงููุดุงุฑูุน ุงูุฌุฏูุฏุฉ",
                seal: {
                    war: "ูุฑุฏ ุญุฑุจ ุงููุงุก ููุง ุชูุทูู ูุทู ุงุญุฏ ุงูุดูุณ",
                    talisman: "ูุฌู ูุฐูุจ ุฑูููู",
                    letterPower: "ููุฉ ุงููุงุก ูู ุงูุญุฑุจ ูุงูุชูุทูู",
                    arabicNames: "ุงูุดูุณุ ุงูููุฑุ ุงูุฒูุฑุฉุ ุนุทุงุฑุฏ",
                    syriacNames: "ุดูุณุงุ ููุฑุงุ ุฒูุฑุชุงุ ุนุทุงุฑุฏู",
                    days: "ุงูุฃุญุฏุ ุงูุงุซูููุ ุงูุซูุงุซุงุก",
                    stars: "ุงูุดุนุฑู ุงูููุงููุฉุ ุงูุณูุงู ุงูุฑุงูุญ",
                    adhesives: "ุชูุงุตู ุงูููุฑ ูุงูุธููุฉ",
                    earthlyHelpers: "ุงูุฌูุ ุงูุฃุฑูุงุญ ุงูุฃุฑุถูุฉ",
                    heavenlyKings: "ูููุงุฆููุ ุฌุจุฑุงุฆูู"
                }
            },
            {
                name: "ุงูุจุทูู",
                letter: "ุจ",
                angle: 12.85,
                meaning: "ุงูุชูุงุฒู ุงูุฑูุญู",
                seal: {
                    war: "ุญุฑุจ ุงูุจุงุก ููุฏูุงุน ูุงูุญูุงูุฉ",
                    talisman: "ููุงู ูุถู",
                    letterPower: "ููุฉ ุงูุจุงุก ูู ุงูุญูุงูุฉ ูุงูุฏูุงุน",
                    arabicNames: "ุงููุดุชุฑูุ ุงูุฒูุฑุฉุ ุงููุฑูุฎ",
                    syriacNames: "ูุดุชุฑูุ ุฒูุฑุชุงุ ูุฑูุฎู",
                    days: "ุงูุฃุฑุจุนุงุกุ ุงูุฎููุณ",
                    stars: "ุงููุณุฑ ุงููุงูุนุ ุงููุณุฑ ุงูุทุงุฆุฑ",
                    adhesives: "ุชูุงุตู ุงูุฃุฑุถ ูุงูุณูุงุก",
                    earthlyHelpers: "ุงูููุงุฆูุฉ ุงูุฃุฑุถูุฉ",
                    heavenlyKings: "ุนุฒุฑุงุฆููุ ุฅุณุฑุงููู"
                }
            },
            {
                name: "ุงูุซุฑูุง",
                letter: "ุฌ",
                angle: 25.71,
                meaning: "ุงูุงุชุตุงู ุงููููู",
                seal: {
                    war: "ุญุฑู ุงูุฌูู ุฌุจุงุฑ ูููุง ุชุนุทูู",
                    talisman: "ุดูุณ ุฐูุจูุฉ",
                    letterPower: "ููุฉ ุงูุฌูู ูู ุงูุฌุจุฑูุช ูุงูููุฉ",
                    arabicNames: "ุงูุดูุณุ ุงูููุฑ๏ผ ุฒุญู",
                    syriacNames: "ุดูุณุง๏ผ ููุฑุง๏ผ ุฒุญุงู",
                    days: "ุงูุฌูุนุฉุ ุงูุณุจุช",
                    stars: "ุงูุซุฑูุงุ ุงูุฏุจุฑุงู",
                    adhesives: "ุชูุงุตู ุงููุงุฑ ูุงููุงุก",
                    earthlyHelpers: "ุงูุนูุงุฑูุช ุงููุงุฑูุฉ",
                    heavenlyKings: "ุฌุจุฑููุ ูููุงุฆูู"
                }
            },
            {
                name: "ุงูุฏุจุฑุงู",
                letter: "ุฏ",
                angle: 38.57,
                meaning: "ุงูููุฉ ุงูุฏุงุฎููุฉ",
                seal: {
                    war: "ุญุฑุจ ุงูุฏุงู ููููุฉ ูุงูุตูุงุจุฉ",
                    talisman: "ุฏุฑุน ุญุฏูุฏู",
                    letterPower: "ููุฉ ุงูุฏุงู ูู ุงูุตูุงุจุฉ ูุงููุชุงูุฉ",
                    arabicNames: "ุงููุฑูุฎุ ุงูุฒูุฑุฉุ ุนุทุงุฑุฏ",
                    syriacNames: "mุฑูุฎู๏ผ ุฒูุฑุชุง๏ผ ุนุทุงุฑุฏู",
                    days: "ุงูุฃุญุฏุ ุงูุงุซููู",
                    stars: "ุงูุฏุจุฑุงูุ ููุจ ุงูุนูุฑุจ",
                    adhesives: "ุชูุงุตู ุงูุญุฏูุฏ ูุงููุงุฑ",
                    earthlyHelpers: "ุงูุฌู ุงููุนุฏูู",
                    heavenlyKings: "ุนุฒุฑุงุฆููุ ูููุงุฆูู"
                }
            },
            {
                name: "ุงูููุนุฉ",
                letter: "ู",
                angle: 51.43,
                meaning: "ุงูุญูุงูุฉ ุงูุฅูููุฉ",
                seal: {
                    war: "ุญุฑุจ ุงููุงุก ููุณุชุฑ ูุงูุญูุงูุฉ",
                    talisman: "ุฎุงุชู ูุถู",
                    letterPower: "ููุฉ ุงููุงุก ูู ุงูุญูุงูุฉ ูุงูุณุชุฑ",
                    arabicNames: "ุงูููุฑุ ุงููุดุชุฑูุ ุฒุญู",
                    syriacNames: "ููุฑa, ูุดุชุฑู๏ผ ุฒุญุงู",
                    days: "ุงูุซูุงุซุงุกุ ุงูุฃุฑุจุนุงุก",
                    stars: "ุณูููุ ูู ุงูุญูุช",
                    adhesives: "ุชูุงุตู ุงููุงุก ูุงูููุงุก",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงููุงุก",
                    heavenlyKings: "ุฌุจุฑุงุฆููุ ุฑุงูุงุฆูู"
                }
            },
            {
                name: "ุงูููุนุฉ",
                letter: "ู",
                angle: 64.28,
                meaning: "ุงูุฑุญูุฉ ุงูุณูุงููุฉ",
                seal: {
                    war: "ุญุฑุจ ุงููุงู ููุฑุญูุฉ ูุงููุบูุฑุฉ",
                    talisman: "ุณุญุงุจุฉ ุจูุถุงุก",
                    letterPower: "ููุฉ ุงููุงู ูู ุงูุฑุญูุฉ ูุงูุนุทู",
                    arabicNames: "ุงูุฒูุฑุฉุ ุนุทุงุฑุฏุ ุงูุดูุณ",
                    syriacNames: "ุฒูุฑุชุง๏ผ ุนุทุงุฑุฏูุ ุดูุณa",
                    days: "ุงูุฎููุณุ ุงูุฌูุนุฉ",
                    stars: "ุงูุฑุดุงุ ุงููุฑู",
                    adhesives: "ุชูุงุตู ุงูุณุญุงุจ ูุงููุทุฑ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูููุงุก",
                    heavenlyKings: "ุฅุณุฑุงูููุ ุนุฒุฑุงุฆูู"
                }
            },
            {
                name: "ุงูุฐุฑุงุน",
                letter: "ุฒ",
                angle: 77.14,
                meaning: "ุงูููุฉ ุงูุฌุณุฏูุฉ",
                seal: {
                    war: "ุญุฑุจ ุงูุฒุงู ููููุฉ ูุงูุถุฑุจ",
                    talisman: "ุณูู ูููุงุฐู",
                    letterPower: "ููุฉ ุงูุฒุงู ูู ุงูุถุฑุจ ูุงููุฌูู",
                    arabicNames: "ุงููุฑูุฎุ ุฒุญูุ ุงูููุฑ",
                    syriacNames: "mุฑูุฎู๏ผ ุฒุญุงู๏ผ ููุฑa",
                    days: "ุงูุณุจุชุ ุงูุฃุญุฏ",
                    stars: "ุฐุงุช ุงููุฑุณูุ ุงูููุฉ",
                    adhesives: "ุชูุงุตู ุงููุงุฑ ูุงูุญุฏูุฏ",
                    earthlyHelpers: "ุงูุฌู ุงููุญุงุฑุจ",
                    heavenlyKings: "ูููุงุฆููุ ุฌุจุฑุงุฆูู"
                }
            },
            {
                name: "ุงููุซุฑุฉ",
                letter: "ุญ",
                angle: 90.0,
                meaning: "ุงูุจุตูุฑุฉ ุงููุงูุฐุฉ",
                seal: {
                    war: "ุญุฑุจ ุงูุญุงุก ููุฑุคูุฉ ูุงูุงุณุชุจุตุงุฑ",
                    talisman: "ุนูู ุฐูุจูุฉ",
                    letterPower: "ููุฉ ุงูุญุงุก ูู ุงูุจุตูุฑุฉ ูุงูุฑุคูุฉ",
                    arabicNames: "ุนุทุงุฑุฏุ ุงูุดูุณุ ุงูุฒูุฑุฉ",
                    syriacNames: "ุนุทุงุฑุฏูุ ุดูุณa๏ผ ุฒูุฑุชุง",
                    days: "ุงูุงุซูููุ ุงูุซูุงุซุงุก",
                    stars: "ุงููุซุฑุฉุ ุงูุทุฑูุฉ",
                    adhesives: "ุชูุงุตู ุงูููุฑ ูุงูุนุชูุฉ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูููุฑ",
                    heavenlyKings: "ุฑุงูุงุฆููุ ุนุฒุฑุงุฆูู"
                }
            },
            {
                name: "ุงูุทุฑูุฉ",
                letter: "ุท",
                angle: 102.85,
                meaning: "ุงูุชุฌุฏูุฏ ุงูุฑูุญู",
                seal: {
                    war: "ุญุฑุจ ุงูุทุงุก ููุชุฌุฏูุฏ ูุงูุชุญูู",
                    talisman: "ูุฑุฏุฉ ุฐูุจูุฉ",
                    letterPower: "ููุฉ ุงูุทุงุก ูู ุงูุชุฌุฏูุฏ ูุงูุชุญูู",
                    arabicNames: "ุงูุฒูุฑุฉุ ุงููุฑูุฎุ ุงููุดุชุฑู",
                    syriacNames: "ุฒูุฑุชุง๏ผ mุฑูุฎo๏ผ ูุดุชุฑู",
                    days: "ุงูุฃุฑุจุนุงุกุ ุงูุฎููุณ",
                    stars: "ุงูุทุฑูุฉุ ุงูุฌุจูุฉ",
                    adhesives: "ุชูุงุตู ุงูุชุฑุงุจ ูุงููุงุก",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุฃุฑุถ",
                    heavenlyKings: "ุนุฒุฑุงุฆููุ ุฌุจุฑุงุฆูู"
                }
            },
            {
                name: "ุงูุฌุจูุฉ",
                letter: "ู",
                angle: 115.71,
                meaning: "ุงูุดุฌุงุนุฉ ุงูุฃุฏุจูุฉ",
                seal: {
                    war: "ุญุฑุจ ุงููุงุก ููุดุฌุงุนุฉ ูุงูุฌุฑุฃุฉ",
                    talisman: "ุณูู ุฐูุจู",
                    letterPower: "ููุฉ ุงููุงุก ูู ุงูุดุฌุงุนุฉ ูุงูุฌุฑุฃุฉ",
                    arabicNames: "ุนุทุงุฑุฏุ ุงูููุฑุ ุงูุดูุณ",
                    syriacNames: "ุนุทุงุฑุฏู๏ผ ููุฑa, ุดูุณa",
                    days: "ุงูุฌูุนุฉุ ุงูุณุจุช",
                    stars: "ุงูุฌุจูุฉุ ุงูุฒุจุฑุฉ",
                    adhesives: "ุชูุงุตู ุงูููุงุก ูุงููุงุฑ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูููุงุก ุงููุงุฑูุฉ",
                    heavenlyKings: "ูููุงุฆููุ ุฑุงูุงุฆูู"
                }
            },
            {
                name: "ุงูุฒุจุฑุฉ",
                letter: "ู",
                angle: 128.57,
                meaning: "ุงูุญููุฉ ุงูุนูููุฉ",
                seal: {
                    war: "ุญุฑุจ ุงููุงู ููุญููุฉ ูุงูุชุฏุจูุฑ",
                    talisman: "ูุชุงุจ ููุฏุณ",
                    letterPower: "ููุฉ ุงููุงู ูู ุงูุญููุฉ ูุงูุชุฏุจูุฑ",
                    arabicNames: "ุฒุญูุ ุงููุดุชุฑูุ ุงููุฑูุฎ",
                    syriacNames: "ุฒุญุงู๏ผ ูุดุชุฑูุ mุฑูุฎo",
                    days: "ุงูุฃุญุฏุ ุงูุงุซููู",
                    stars: "ุงูุฒุจุฑุฉุ ุงูุตุฑูุฉ",
                    adhesives: "ุชูุงุตู ุงููุนุฑูุฉ ูุงูุนูู",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุญููุฉ",
                    heavenlyKings: "ุฌุจุฑุงุฆููุ ุฅุณุฑุงููู"
                }
            },
            {
                name: "ุงูุตุฑูุฉ",
                letter: "ู",
                angle: 141.43,
                meaning: "ุงูุชุบููุฑ ุงูุฅูุฌุงุจู",
                seal: {
                    war: "ุญุฑุจ ุงููุงู ููุชุบููุฑ ูุงูุชุญูู",
                    talisman: "ุฑูุงุญ ูุชุบูุฑุฉ",
                    letterPower: "ููุฉ ุงููุงู ูู ุงูุชุบููุฑ ูุงูุชุญูู",
                    arabicNames: "ุงูุดูุณุ ุงูุฒูุฑุฉุ ุนุทุงุฑุฏ",
                    syriacNames: "ุดูุณa๏ผ ุฒูุฑุชุงุ ุนุทุงุฑุฏo",
                    days: "ุงูุซูุงุซุงุกุ ุงูุฃุฑุจุนุงุก",
                    stars: "ุงูุตุฑูุฉุ ุงูุนูุงุก",
                    adhesives: "ุชูุงุตู ุงูุซุจุงุช ูุงูุชุบููุฑ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุฑูุงุญ",
                    heavenlyKings: "ุฑูุงุฆููุ ุนุฒุฑุงุฆูู"
                }
            },
            {
                name: "ุงูุนูุงุก",
                letter: "ู",
                angle: 154.28,
                meaning: "ุงูููุงุฏุฉ ุงูุญูููุฉ",
                seal: {
                    war: "ุญุฑุจ ุงูููู ููููุงุฏุฉ ูุงูุญููุฉ",
                    talisman: "ุตููุฌุงู ูููู",
                    letterPower: "ููุฉ ุงูููู ูู ุงูููุงุฏุฉ ูุงูุญููุฉ",
                    arabicNames: "ุงูููุฑุ ุงููุฑูุฎุ ุงูุฒูุฑุฉ",
                    syriacNames: "ููุฑa, mุฑูุฎo๏ผ ุฒูุฑุชุง",
                    days: "ุงูุฎููุณุ ุงูุฌูุนุฉ",
                    stars: "ุงูุนูุงุกุ ุงูุณูุงู",
                    adhesives: "ุชูุงุตู ุงูุณูุทุฉ ูุงููุณุคูููุฉ",
                    earthlyHelpers: "ุงูุฌู ุงููููู",
                    heavenlyKings: "ูููุงุฆููุ ุฌุจุฑุงุฆูู"
                }
            },
            {
                name: "ุงูุณูุงู",
                letter: "ู",
                angle: 167.14,
                meaning: "ุงูุนุฏุงูุฉ ุงูููููุฉ",
                seal: {
                    war: "ุญุฑุจ ุงูููู ููุนุฏู ูุงูุฅูุตุงู",
                    talisman: "ููุฒุงู ุฐูุจู",
                    letterPower: "ููุฉ ุงูููู ูู ุงูุนุฏู ูุงูุฅูุตุงู",
                    arabicNames: "ุงูุฒูุฑุฉุ ุนุทุงุฑุฏุ ุงูููุฑ",
                    syriacNames: "ุฒูุฑุชุง๏ผ ุนุทุงุฑุฏo๏ผ ููุฑa",
                    days: "ุงูุณุจุชุ ุงูุฃุญุฏ",
                    stars: "ุงูุณูุงูุ ุงูุบูุฑ",
                    adhesives: "ุชูุงุตู ุงูุญู ูุงูุนุฏู",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุนุฏุงูุฉ",
                    heavenlyKings: "ุนุฒุฑุงุฆููุ ุฑุงูุงุฆูู"
                }
            },
            {
                name: "ุงูุบูุฑ",
                letter: "ุณ",
                angle: 180.0,
                meaning: "ุงููุบูุฑุฉ ุงูุฅูููุฉ",
                seal: {
                    war: "ุญุฑุจ ุงูุณูู ูููุบูุฑุฉ ูุงูุฑุญูุฉ",
                    talisman: "ุบููุฉ ููุทุฑุฉ",
                    letterPower: "ููุฉ ุงูุณูู ูู ุงููุบูุฑุฉ ูุงูุฑุญูุฉ",
                    arabicNames: "ุนุทุงุฑุฏุ ุงูุดูุณุ ุงููุฑูุฎ",
                    syriacNames: "ุนุทุงุฑุฏo๏ผ ุดูุณa, mุฑูุฎo",
                    days: "ุงูุงุซูููุ ุงูุซูุงุซุงุก",
                    stars: "ุงูุบูุฑุ ุงูุฒุจุงูุง",
                    adhesives: "ุชูุงุตู ุงูุฑุญูุฉ ูุงููุบูุฑุฉ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุฑุญูุฉ",
                    heavenlyKings: "ุฌุจุฑุงุฆููุ ูููุงุฆูู"
                }
            },
            {
                name: "ุงูุฒุจุงูุง",
                letter: "ุน",
                angle: 192.85,
                meaning: "ุงูุชูุงุฒู ุงููุงุฏู",
                seal: {
                    war: "ุญุฑุจ ุงูุนูู ููุชูุงุฒู ูุงูุงุณุชูุฑุงุฑ",
                    talisman: "ุจูุงุก ูุชูุงุฒู",
                    letterPower: "ููุฉ ุงูุนูู ูู ุงูุชูุงุฒู ูุงูุงุณุชูุฑุงุฑ",
                    arabicNames: "ุงููุฑูุฎุ ุงูุฒูุฑุฉุ ุงููุดุชุฑู",
                    syriacNames: "mุฑูุฎoุ ุฒูุฑุชุง๏ผ ูุดุชุฑู",
                    days: "ุงูุฃุฑุจุนุงุกุ ุงูุฎููุณ",
                    stars: "ุงูุฒุจุงูุงุ ุงูุฅูููู",
                    adhesives: "ุชูุงุตู ุงููุงุฏุฉ ูุงูุฑูุญ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุชูุงุฒู",
                    heavenlyKings: "ุฑูุงุฆููุ ุนุฒุฑุงุฆูู"
                }
            },
            {
                name: "ุงูุฅูููู",
                letter: "ู",
                angle: 205.71,
                meaning: "ุงูุชุงุฌ ุงูุฑูุญู",
                seal: {
                    war: "ุญุฑุจ ุงููุงุก ููุฑูุญุงููุฉ ูุงููุฏุงุณุฉ",
                    talisman: "ุชุงุฌ ูููู",
                    letterPower: "ููุฉ ุงููุงุก ูู ุงูุฑูุญุงููุฉ ูุงููุฏุงุณุฉ",
                    arabicNames: "ุงูุดูุณุ ุงูููุฑุ ุฒุญู",
                    syriacNames: "ุดูุณa, ููุฑa, ุฒุญุงู",
                    days: "ุงูุฌูุนุฉุ ุงูุณุจุช",
                    stars: "ุงูุฅููููุ ุงูููุจ",
                    adhesives: "ุชูุงุตู ุงูููููุช ูุงูุฑูุญ",
                    earthlyHelpers: "ุงูููุงุฆูุฉ ุงูุฑูุญูุฉ",
                    heavenlyKings: "ุฌุจุฑุงุฆููุ ูููุงุฆูู"
                }
            },
            {
                name: "ุงูููุจ",
                letter: "ุต",
                angle: 218.57,
                meaning: "ูุฑูุฒ ุงูุทุงูุฉ",
                seal: {
                    war: "ุญุฑุจ ุงูุตุงุฏ ููุทุงูุฉ ูุงูููุฉ",
                    talisman: "ููุจ ูุงุจุถ",
                    letterPower: "ููุฉ ุงูุตุงุฏ ูู ุงูุทุงูุฉ ูุงูููุฉ",
                    arabicNames: "ุงูุฒูุฑุฉุ ุนุทุงุฑุฏุ ุงููุฑูุฎ",
                    syriacNames: "ุฒูุฑุชุงุ ุนุทุงุฑุฏoุ mุฑูุฎo",
                    days: "ุงูุฃุญุฏุ ุงูุงุซููู",
                    stars: "ุงูููุจุ ุงูุดููุฉ",
                    adhesives: "ุชูุงุตู ุงูููุฉ ูุงูุถุนู",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุทุงูุฉ",
                    heavenlyKings: "ุนุฒุฑุงุฆููุ ุฑุงูุงุฆูู"
                }
            },
            {
                name: "ุงูุดููุฉ",
                letter: "ู",
                angle: 231.43,
                meaning: "ุงูุชุญูู ุงููุจูุฑ",
                seal: {
                    war: "ุญุฑุจ ุงููุงู ููุชุญูู ูุงูุชุบููุฑ ุงูุฌุฐุฑู",
                    talisman: "ูุฑุงุดุฉ ูุชุญููุฉ",
                    letterPower: "ููุฉ ุงููุงู ูู ุงูุชุญูู ูุงูุชุบููุฑ",
                    arabicNames: "ุงูููุฑุ ุงูุดูุณุ ุงููุดุชุฑู",
                    syriacNames: "ููุฑa, ุดูุณa, ูุดุชุฑู",
                    days: "ุงูุซูุงุซุงุกุ ุงูุฃุฑุจุนุงุก",
                    stars: "ุงูุดููุฉุ ุงููุนุงุฆู",
                    adhesives: "ุชูุงุตm ุงูุซุจุงุช ูุงูุชุญูู",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุชุญูู",
                    heavenlyKings: "ูููุงุฆููุ ุฌุจุฑุงุฆูู"
                }
            },
            {
                name: "ุงููุนุงุฆู",
                letter: "ุฑ",
                angle: 244.28,
                meaning: "ุงูุจุฑูุงุช ุงูุณูุงููุฉ",
                seal: {
                    war: "ุญุฑุจ ุงูุฑุงุก ููุจุฑูุฉ ูุงูููุฑุฉ",
                    talisman: "ุณูุฉ ุฎูุฑุงุช",
                    letterPower: "ููุฉ ุงูุฑุงุก ูู ุงูุจุฑูุฉ ูุงูููุฑุฉ",
                    arabicNames: "ุนุทุงุฑุฏุ ุงูุฒูุฑุฉุ ุงูููุฑ",
                    syriacNames: "ุนุทุงุฑุฏoุ ุฒูุฑุชุงุ ููุฑa",
                    days: "ุงูุฎููุณุ ุงูุฌูุนุฉ",
                    stars: "ุงููุนุงุฆูุ ุงูุจูุฏุฉ",
                    adhesives: "ุชูุงุตู ุงูุนุทุงุก ูุงูุจุฑูุฉ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุจุฑูุฉ",
                    heavenlyKings: "ุฑูุงุฆููุ ุนุฒุฑุงุฆูู"
                }
            },
            {
                name: "ุงูุจูุฏุฉ",
                letter: "ุด",
                angle: 257.14,
                meaning: "ุงูุงุณุชูุฑุงุฑ ุงูุฃุฑุถู",
                seal: {
                    war: "ุญุฑุจ ุงูุดูู ููุงุณุชูุฑุงุฑ ูุงูุซุจุงุช",
                    talisman: "ุตุฎุฑุฉ ุซุงุจุชุฉ",
                    letterPower: "ููุฉ ุงูุดูู ูู ุงูุงุณุชูุฑุงุฑ ูุงูุซุจุงุช",
                    arabicNames: "ุงููุฑูุฎุ ุฒุญูุ ุงูุดูุณ",
                    syriacNames: "mุฑูุฎoุ ุฒุญุงูุ ุดูุณa",
                    days: "ุงูุณุจุชุ ุงูุฃุญุฏ",
                    stars: "ุงูุจูุฏุฉุ ุณุนุฏ ุงูุฐุงุจุญ",
                    adhesives: "ุชูุงุตู ุงูุฃุฑุถ ูุงูุงุณุชูุฑุงุฑ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุฃุฑุถ ุงูุซุงุจุชุฉ",
                    heavenlyKings: "ุฌุจุฑุงุฆููุ mููุงุฆูู"
                }
            },
            {
                name: "ุณุนุฏ ุงูุฐุงุจุญ",
                letter: "ุช",
                angle: 270.0,
                meaning: "ุงูุชุถุญูุฉ ุงูุฅูุฌุงุจูุฉ",
                seal: {
                    war: "ุญุฑุจ ุงูุชุงุก ููุชุถุญูุฉ ูุงููุฏุงุก",
                    talisman: "ุณููู ููุฏุณุฉ",
                    letterPower: "ููุฉ ุงูุชุงุก ูู ุงูุชุถุญูุฉ ูุงููุฏุงุก",
                    arabicNames: "ุงูุฒูุฑุฉุ ุงููุดุชุฑูุ ุนุทุงุฑุฏ",
                    syriacNames: "ุฒูุฑุชุงุ ูุดุชุฑูุ ุนุทุงุฑุฏo",
                    days: "ุงูุงุซูููุ ุงูุซูุงุซุงุก",
                    stars: "ุณุนุฏ ุงูุฐุงุจุญุ ุณุนุฏ ุจูุน",
                    adhesives: "ุชูุงุตู ุงูุนุทุงุก ูุงูุชุถุญูุฉ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุชุถุญูุฉ",
                    heavenlyKings: "ุนุฒุฑุงุฆููุ ุฑุงูุงุฆูู"
                }
            },
            {
                name: "ุณุนุฏ ุจูุน",
                letter: "ุซ",
                angle: 282.85,
                meaning: "ุงููุจูู ุงูุฅููู",
                seal: {
                    war: "ุญุฑุจ ุงูุซุงุก ูููุจูู ูุงูุฑุถุง",
                    talisman: "ูุฏ ููุชูุญุฉ",
                    letterPower: "ููุฉ ุงูุซุงุก ูู ุงููุจูู ูุงูุฑุถุง",
                    arabicNames: "ุงูููุฑุ ุงููุฑูุฎุ ุงูุฒูุฑุฉ",
                    syriacNames: "ููุฑa, mุฑูุฎoุ ุฒูุฑุชุง",
                    days: "ุงูุฃุฑุจุนุงุกุ ุงูุฎููุณ",
                    stars: "ุณุนุฏ ุจูุนุ ุณุนุฏ ุงูุณุนูุฏ",
                    adhesives: "ุชูุงุตู ุงููุจูู ูุงูุฑูุถ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงููุจูู",
                    heavenlyKings: "mููุงุฆููุ ุฌุจุฑุงุฆูู"
                }
            },
            {
                name: "ุณุนุฏ ุงูุณุนูุฏ",
                letter: "ุฎ",
                angle: 295.71,
                meaning: "ุงูุณุนุงุฏุฉ ุงูุฏุงุฆูุฉ",
                seal: {
                    war: "ุญุฑุจ ุงูุฎุงุก ููุณุนุงุฏุฉ ูุงููุฑุญ",
                    talisman: "ูุฌู ูุจุชุณู",
                    letterPower: "ููุฉ ุงูุฎุงุก ูู ุงูุณุนุงุฏุฉ ูุงููุฑุญ",
                    arabicNames: "ุงูุดูุณุ ุนุทุงุฑุฏุ ุงูููุฑ",
                    syriacNames: "ุดูุณa, ุนุทุงุฑุฏoุ ููุฑa",
                    days: "ุงูุฌูุนุฉุ ุงูุณุจุช",
                    stars: "ุณุนุฏ ุงูุณุนูุฏุ ุณุนุฏ ุงูุฃุฎุจูุฉ",
                    adhesives: "ุชูุงุตู ุงููุฑุญ ูุงูุญุฒู",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงููุฑุญ",
                    heavenlyKings: "ุฑูุงุฆููุ ุนุฒุฑุงุฆูู"
                }
            },
            {
                name: "ุณุนุฏ ุงูุฃุฎุจูุฉ",
                letter: "ุฐ",
                angle: 308.57,
                meaning: "ุงูุฃุณุฑุงุฑ ุงูููููุฉ",
                seal: {
                    war: "ุญุฑุจ ุงูุฐุงู ููุฃุณุฑุงุฑ ูุงูุฎูุงูุง",
                    talisman: "ุตูุฏูู ูุบูู",
                    letterPower: "ููุฉ ุงูุฐุงู ูู ุงูุฃุณุฑุงุฑ ูุงูุฎูุงูุง",
                    arabicNames: "ุงููุดุชุฑูุ ุงููุฑูุฎุ ุงูุฒูุฑุฉ",
                    syriacNames: "mุดุชุฑูุ mุฑูุฎoุ ุฒูุฑุชุง",
                    days: "ุงูุฃุญุฏุ ุงูุงุซููู",
                    stars: "ุณุนุฏ ุงูุฃุฎุจูุฉุ ุงูููุฏู",
                    adhesives: "ุชูุงุตู ุงูุธุงูุฑ ูุงูุจุงุทู",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุฃุณุฑุงุฑ",
                    heavenlyKings: "ุฌุจุฑุงุฆููุ mููุงุฆูู"
                }
            },
            {
                name: "ุงูููุฏู",
                letter: "ุถ",
                angle: 321.43,
                meaning: "ุงูุจุฏุงูุงุช ุงูุฌุฏูุฏุฉ",
                seal: {
                    war: "ุญุฑุจ ุงูุถุงุฏ ููุจุฏุงูุงุช ูุงูุชุฃุณูุณ",
                    talisman: "ุจุฐุฑุฉ ูุงุจุชุฉ",
                    letterPower: "ููุฉ ุงูุถุงุฏ ูู ุงูุจุฏุงูุงุช ูุงูุชุฃุณูุณ",
                    arabicNames: "ุนุทุงุฑุฏุ ุงูููุฑุ ุงูุดูุณ",
                    syriacNames: "ุนุทุงุฑุฏoุ ููุฑa, ุดูุณa",
                    days: "ุงูุซูุงุซุงุกุ ุงูุฃุฑุจุนุงุก",
                    stars: "ุงูููุฏูุ ุงููุคุฎุฑ",
                    adhesives: "ุชูุงุตู ุงูุจุฏุงูุฉ ูุงูููุงูุฉ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูุจุฏุงูุงุช",
                    heavenlyKings: "ุนุฒุฑุงุฆููุ ุฑุงูุงุฆูู"
                }
            },
            {
                name: "ุงููุคุฎุฑ",
                letter: "ุธ",
                angle: 334.28,
                meaning: "ุฅููุงุก ุงููุฑุงุญู",
                seal: {
                    war: "ุญุฑุจ ุงูุธุงุก ููููุงูุงุช ูุงูุฎุชุงู",
                    talisman: "ููุงูุฉ ุงูุทุฑูู",
                    letterPower: "ููุฉ ุงูุธุงุก ูู ุงูููุงูุงุช ูุงูุฎุชุงู",
                    arabicNames: "ุงูุฒูุฑุฉุ ุงูุดูุณุ ุงููุฑูุฎ",
                    syriacNames: "ุฒูุฑุชุงุ ุดูุณa, mุฑูุฎo",
                    days: "ุงูุฎููุณุ ุงูุฌูุนุฉ",
                    stars: "ุงููุคุฎุฑุ ุงูุฑุดุงุก",
                    adhesives: "ุชูุงุตู ุงูุจุฏุงูุฉ ูุงูููุงูุฉ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงูููุงูุงุช",
                    heavenlyKings: "mููุงุฆููุ ุฌุจุฑุงุฆูู"
                }
            },
            {
                name: "ุงูุฑุดุงุก",
                letter: "ุบ",
                angle: 347.14,
                meaning: "ุงูุฑุดุฏ ุงูุฅููู",
                seal: {
                    war: "ุญุฑุจ ุงูุบูู ููุฑุดุฏ ูุงูุญููุฉ",
                    talisman: "ุจูุตูุฉ ุฐูุจูุฉ",
                    letterPower: "ููุฉ ุงูุบูู ูู ุงูุฑุดุฏ ูุงูุญููุฉ",
                    arabicNames: "ุงูููุฑุ ุนุทุงุฑุฏุ ุงููุดุชุฑู",
                    syriacNames: "ููุฑa, ุนุทุงุฑุฏoุ ูุดุชุฑู",
                    days: "ุงูุณุจุชุ ุงูุฃุญุฏ",
                    stars: "ุงูุฑุดุงุกุ ุงูุดุฑุทุงู",
                    adhesives: "ุชูุงุตู ุงูุถูุงู ูุงูุฑุดุงุฏ",
                    earthlyHelpers: "ุฃุฑูุงุญ ุงููุฏุงูุฉ",
                    heavenlyKings: "ุฑูุงุฆููุ ุนุฒุฑุงุฆูู"
                }
            }
        ];
        const ABU_MASHAR_TABLE = MOON_MANSIONS.map((item, index) => ({
            name: item.name,
            degree: item.angle.toFixed(2),
            secret: String.fromCharCode(0x0600 + index + 1),
            property: item.meaning
        }));
        const ASMA_UL_HUSNA = [
            "ุงููู", "ุงูุฑุญูู", "ุงูุฑุญูู", "ุงูููู", "ุงููุฏูุณ", "ุงูุณูุงู", "ุงููุคูู", "ุงูููููู", "ุงูุนุฒูุฒ", "ุงูุฌุจุงุฑ",
            "ุงููุชูุจุฑ", "ุงูุฎุงูู", "ุงูุจุงุฑุฆ", "ุงููุตูุฑ", "ุงูุบูุงุฑ", "ุงูููุงุฑ", "ุงูููุงุจ", "ุงูุฑุฒุงู", "ุงููุชุงุญ", "ุงูุนููู",
            "ุงููุงุจุถ", "ุงูุจุงุณุท", "ุงูุฎุงูุถ", "ุงูุฑุงูุน", "ุงููุนุฒ", "ุงููุฐู", "ุงูุณููุน", "ุงูุจุตูุฑ", "ุงูุญูู", "ุงูุนุฏู",
            "ุงููุทูู", "ุงูุฎุจูุฑ", "ุงูุญููู", "ุงูุนุธูู", "ุงูุบููุฑ", "ุงูุดููุฑ", "ุงูุนูู", "ุงููุจูุฑ", "ุงูุญููุธ", "ุงููููุช",
            "ุงูุญุณูุจ", "ุงูุฌููู", "ุงููุฑูู", "ุงูุฑููุจ", "ุงููุฌูุจ", "ุงููุงุณุน", "ุงูุญููู", "ุงููุฏูุฏ", "ุงููุฌูุฏ", "ุงูุจุงุนุซ",
            "ุงูุดููุฏ", "ุงูุญู", "ุงููููู", "ุงูููู", "ุงููุชูู", "ุงูููู", "ุงูุญููุฏ", "ุงููุญุตู", "ุงููุจุฏุฆ", "ุงููุนูุฏ",
            "ุงููุญูู", "ุงููููุช", "ุงูุญู", "ุงููููู", "ุงููุงุฌุฏ", "ุงููุงุฌd", "ุงููุงุญุฏ", "ุงูุตูุฏ", "ุงููุงุฏุฑ", "ุงูููุชุฏุฑ",
            "ุงูููุฏู", "ุงููุคุฎุฑ", "ุงูุฃูู", "ุงูุขุฎุฑ", "ุงูุธุงูุฑ", "ุงูุจุงุทู", "ุงููุงูู", "ุงููุชุนุงูู", "ุงูุจุฑ", "ุงูุชูุงุจ",
            "ุงูููุชูู", "ุงูุนูู", "ุงูุฑุคูู", "ูุงูู ุงูููู", "ุฐู ุงูุฌูุงู ูุงูุฅูุฑุงู", "ุงูููุณุท", "ุงูุฌุงูุน", "ุงูุบูู", "ุงููุบูู",
            "ุงููุงูุน", "ุงูุถุงุฑ", "ุงููุงูุน", "ุงูููุฑ", "ุงููุงุฏู", "ุงูุจุฏูุน", "ุงูุจุงูู", "ุงููุงุฑุซ", "ุงูุฑุดูุฏ", "ุงูุตุจูุฑ"
        ];
        const WEEK_DAYS = [
            { name: "ุงูุฃุญุฏ", num: 1, planet: "ุงูุดูุณ" },
            { name: "ุงูุฅุซููู", num: 2, planet: "ุงูููุฑ" },
            { name: "ุงูุซูุงุซุงุก", num: 3, planet: "ุงููุฑูุฎ" },
            { name: "ุงูุฃุฑุจุนุงุก", num: 4, planet: "ุนุทุงุฑุฏ" },
            { name: "ุงูุฎููุณ", num: 5, planet: "ุงููุดุชุฑู" },
            { name: "ุงูุฌูุนุฉ", num: 6, planet: "ุงูุฒูุฑุฉ" },
            { name: "ุงูุณุจุช", num: 7, planet: "ุฒุญู" }
        ];
        const DAY_SERVANTS = {
            "ุงูุฃุญุฏ": { upper: "ูููุงุฆูู", middle: "ุนุฒุฑุงุฆูู", lower: "ุฌุจุฑูู" },
            "ุงูุฅุซููู": { upper: "ุฑูุงุฆูู", middle: "ุณุฑููุงู", lower: "ุตุฏููุงุฆูู" },
            "ุงูุซูุงุซุงุก": { upper: "ุณูุงุฆูู", middle: "ููุฑุงุฆูู", lower: "ุนุฒุฑุงุฆูู" },
            "ุงูุฃุฑุจุนุงุก": { upper: "ุนุฒุฑุงุฆูู", middle: "ูุงููุงุฆูู", lower: "ูุงุณูุงุฆูู" },
            "ุงูุฎููุณ": { upper: "ุฌุจุฑูู", middle: "ุตุฏููุงุฆูู", lower: "ููุฑุงุฆูู" },
            "ุงูุฌูุนุฉ": { upper: "ุตุฏููุงุฆูู", middle: "ูุงุณูุงุฆูู", lower: "ุณุฑููุงู" },
            "ุงูุณุจุช": { upper: "ูุงููุงุฆูู", middle: "ูููุงุฆูู", lower: "ุฑูุงุฆูู" }
        };
        const SURAHS = [
            "ุงููุงุชุญุฉ", "ุงูุจูุฑุฉ", "ุขู ุนูุฑุงู", "ุงููุณุงุก", "ุงููุงุฆุฏุฉ", "ุงูุฃูุนุงู", "ุงูุฃุนุฑุงู", "ุงูุฃููุงู",
            "ุงูุชูุจุฉ", "ูููุณ", "ููุฏ", "ููุณู", "ุงูุฑุนุฏ", "ุฅุจุฑุงููู", "ุงูุญุฌุฑ", "ุงููุญู",
            "ุงูุฅุณุฑุงุก", "ุงูููู", "ูุฑูู", "ุทู", "ุงูุฃูุจูุงุก", "ุงูุญุฌ", "ุงููุคูููู", "ุงูููุฑ",
            "ุงููุฑูุงู", "ุงูุดุนุฑุงุก", "ุงูููู", "ุงููุตุต", "ุงูุนููุจูุช", "ุงูุฑูู", "ูููุงู", "ุงูุณุฌุฏุฉ",
            "ุงูุฃุญุฒุงุจ", "ุณุจุฃ", "ูุงุทุฑ", "ูุณ", "ุงูุตุงูุงุช", "ุต", "ุงูุฒูุฑ", "ุบุงูุฑ",
            "ูุตูุช", "ุงูุดูุฑู", "ุงูุฒุฎุฑู", "ุงูุฏุฎุงู", "ุงูุฌุงุซูุฉ", "ุงูุฃุญูุงู", "ูุญูุฏ", "ุงููุชุญ",
            "ุงูุญุฌุฑุงุช", "ู", "ุงูุฐุงุฑูุงุช", "ุงูุทูุฑ", "ุงููุฌู", "ุงูููุฑ", "ุงูุฑุญูู", "ุงููุงูุนุฉ",
            "ุงูุญุฏูุฏ", "ุงููุฌุงุฏูุฉ", "ุงูุญุดุฑ", "ุงูููุชุญูุฉ", "ุงูุตู", "ุงูุฌูุนุฉ", "ุงูููุงูููู", "ุงูุชุบุงุจู",
            "ุงูุทูุงู", "ุงูุชุญุฑูู", "ุงูููู", "ุงูููู", "ุงูุญุงูุฉ", "ุงููุนุงุฑุฌ", "ููุญ", "ุงูุฌู", "ุงููุฒูู", "ุงููุฏุซุฑ",
            "ุงูููุงูุฉ", "ุงูุฅูุณุงู", "ุงููุฑุณูุง", "ุงููุจุฃ", "ุงููุงุฒุนุงุช", "ุนุจุณ", "ุงูุชูููุฑ", "ุงูุงููุทุงุฑ", "ุงููุทูููู", "ุงูุงูุดูุงู",
            "ุงูุจุฑูุฌ", "ุงูุทุงุฑู", "ุงูุฃุนูู", "ุงูุบุงุดูุฉ", "ุงููุฌุฑ", "ุงูุจูุฏ", "ุงูุดูุณ", "ุงูููู", "ุงูุถุญู", "ุงูุดุฑุญ",
            "ุงูุชูู", "ุงูุนูู", "ุงููุฏุฑ", "ุงูุจููุฉ", "ุงูุฒูุฒูุฉ", "ุงูุนุงุฏูุงุช", "ุงููุงุฑุนุฉ", "ุงูุชูุงุซุฑ", "ุงูุนุตุฑ", "ุงูููุฒุฉ",
            "ุงูููู", "ูุฑูุด", "ุงููุงุนูู", "ุงูููุซุฑ", "ุงููุงูุฑูู", "ุงููุตุฑ", "ุงููุณุฏ", "ุงูุฅุฎูุงุต", "ุงูููู", "ุงููุงุณ"
        ];
        const baseClasses = ['c-red', 'c-black', 'c-white'];
        /* ---------- ุนูุงุตุฑ DOM ---------- */
        const gridEl = document.getElementById('grid');
        const rowNumbersEl = document.getElementById('rowNumbers');
        const textInput = document.getElementById('textInput');
        const btnLoad = document.getElementById('btnLoad');
        const btnLoadFromInput = document.getElementById('btnLoadFromInput');
        const btnReset = document.getElementById('btnReset');
        const btnRandom = document.getElementById('btnRandom');
        const btnSpectrum = document.getElementById('btnSpectrum');
        const btnPrev = document.getElementById('btnPrev');
        const btnNext = document.getElementById('btnNext');
        const btnSubmit = document.getElementById('btnSubmit');
        const btnFillDemo = document.getElementById('btnFillDemo');
        const revealedCountEl = document.getElementById('revealedCount');
        const currentWordEl = document.getElementById('currentWord');
        const modeSelect = document.getElementById('mode');
        const sizeRange = document.getElementById('sizeRange');
        const sizeValue = document.getElementById('sizeValue');
        const rainbowLegend = document.getElementById('rainbowLegend');
        const houseModal = document.getElementById('houseModal');
        const modalHouseName = document.getElementById('modalHouseName');
        const modalHouseNumber = document.getElementById('modalHouseNumber');
        const modalHouseLetter = document.getElementById('modalHouseLetter');
        const modalHouseZodiac = document.getElementById('modalHouseZodiac');
        const modalHouseGematria = document.getElementById('modalHouseGematria');
        const modalHouseCycle = document.getElementById('modalHouseCycle');
        const modalHouseEnergy = document.getElementById('modalHouseEnergy');
        const modalHouseInfluence = document.getElementById('modalHouseInfluence');
        const modalHouseBenefits = document.getElementById('modalHouseBenefits');
        const modalHouseChallenges = document.getElementById('modalHouseChallenges');
        const modalMansionName = document.getElementById('modalMansionName');
        const modalMansionLetter = document.getElementById('modalMansionLetter');
        const modalMansionAngle = document.getElementById('modalMansionAngle');
        const modalMansionMeaning = document.getElementById('modalMansionMeaning');
        const modalSealWar = document.getElementById('modalSealWar');
        const modalSealTalisman = document.getElementById('modalSealTalisman');
        const modalSealLetterPower = document.getElementById('modalSealLetterPower');
        const modalSealArabicNames = document.getElementById('modalSealArabicNames');
        const modalSealSyriacNames = document.getElementById('modalSealSyriacNames');
        const modalSealDays = document.getElementById('modalSealDays');
        const modalSealStars = document.getElementById('modalSealStars');
        const modalSealAdhesives = document.getElementById('modalSealAdhesives');
        const modalSealEarthlyHelpers = document.getElementById('modalSealEarthlyHelpers');
        const modalSealHeavenlyKings = document.getElementById('modalSealHeavenlyKings');
        const modalRumalForm = document.getElementById('modalRumalForm');
        const modalRumalPattern = document.getElementById('modalRumalPattern');
        const modalRumalMeaning = document.getElementById('modalRumalMeaning');
        const modalTafaqBig = document.getElementById('modalTafaqBig');
        const modalTafaqSmall = document.getElementById('modalTafaqSmall');
        const modalTafaqMiddle = document.getElementById('modalTafaqMiddle');
        const modalTafaqNumber = document.getElementById('modalTafaqNumber');
        const modalTafaqMeaning = document.getElementById('modalTafaqMeaning');
        const closeHouseModal = document.getElementById('closeHouseModal');
        const dateInput = document.getElementById('dateInput');
        const btnAnalyze = document.getElementById('btnAnalyze');
        const btnToggleTables = document.getElementById('btnToggleTables');
        const outputEl = document.getElementById('output');
        const mainTable = document.getElementById('mainTable');
        const mansionBody = document.getElementById('mansionBody');
        const abumasharTable = document.getElementById('abumasharTable');
        const abumasharBody = document.getElementById('abumasharBody');
        const ghazaliTriangle = document.getElementById('ghazaliTriangle');
        const rumalForms = document.getElementById('rumalForms');
        const btnExtractMessage = document.getElementById('btnExtractMessage');
        const treasureMessage = document.getElementById('treasureMessage');
        let BOARD = 8, TOTAL = BOARD * BOARD;
        let words = Array.from({ length: TOTAL }, (_, i) => '');
        let assignedClass = new Array(TOTAL).fill(null);
        let revealed = new Array(TOTAL).fill(false);
        let currentIndex = 0;
        let cells = [];
        let currentHouse = 0;
        let houseCycleCount = 1;
        let lastRightClickTime = 0;
        let selectedCell = null;
        /* ---------- ูุธุงุฆู ุงููุณุงุนุฏุฉ ---------- */
        function cleanText(t) {
            return t.replace(/[\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06ED]/g, '').trim();
        }
        function splitToWords(text) {
            if (!text) return [];
            const cleaned = text.replace(/[ุ!ุ.ุ,:()\"ยซยป<>โโ\-]/g, ' ');
            const parts = cleaned.split(/\s+/).map(s => s.trim()).filter(Boolean);
            return parts;
        }
        function computeAbjad(word) {
            let s = cleanText(word).toLowerCase();
            let total = 0;
            for (let ch of s) {
                if (abjadMap[ch]) total += abjadMap[ch];
            }
            return total;
        }
        // ุญุณุงุจ ุงูุฌูู ูุน ุฅุถุงูุฉ ุฑูู ุงูุญุฑู
        function computeAbjadWithLetterPosition(word) {
            let s = cleanText(word).toLowerCase();
            let total = 0;
            for (let i = 0; i < s.length; i++) {
                const ch = s[i];
                const letterValue = abjadMap[ch] || 0;
                total += letterValue + (i + 1); // ุฅุถุงูุฉ ุฑูู ุงูุญุฑู (1-indexed)
            }
            return total;
        }
        // ุญุณุงุจ ุงูุฌูู ูุน ุทุฑุญ ุฑูู ุงูุญุฑู
        function computeAbjadWithLetterPositionSubtracted(word) {
            let s = cleanText(word).toLowerCase();
            let total = 0;
            for (let i = 0; i < s.length; i++) {
                const ch = s[i];
                const letterValue = abjadMap[ch] || 0;
                total += letterValue - (i + 1); // ุทุฑุญ ุฑูู ุงูุญุฑู (1-indexed)
            }
            return total;
        }
        // ุญุณุงุจ ุงูุฌูู ูุน ุชุฑุชูุจ ุงูุญุฑูู
        function computeAbjadWithLetterOrder(word) {
            let s = cleanText(word).toLowerCase();
            let total = 0;
            for (let i = 0; i < s.length; i++) {
                const ch = s[i];
                const letterValue = abjadMap[ch] || 0;
                total += letterValue * (i + 1); // ุถุฑุจ ุงููููุฉ ุจุชุฑุชูุจ ุงูุญุฑู
            }
            return total;
        }
        // ุญุณุงุจ ุงูุฌูู ูุน ูุชูุณุท ุงูุญุฑูู
        function computeAbjadWithAverage(word) {
            let s = cleanText(word).toLowerCase();
            let total = 0;
            let letterCount = 0;
            for (let ch of s) {
                if (abjadMap[ch]) {
                    total += abjadMap[ch];
                    letterCount++;
                }
            }
            return letterCount > 0 ? Math.round(total / letterCount) : 0;
        }
        // ุญุณุงุจ ุงูุฌูู ูุน ุฌูุน ุฃุฑูุงู ุงูุญุฑูู
        function computeAbjadWithDigitSum(word) {
            let s = cleanText(word).toLowerCase();
            let total = 0;
            for (let ch of s) {
                if (abjadMap[ch]) {
                    const value = abjadMap[ch];
                    // ุฌูุน ุฃุฑูุงู ุงููููุฉ (ูุซู 28 โ 2+8=10)
                    let digitSum = 0;
                    let num = value;
                    while (num > 0) {
                        digitSum += num % 10;
                        num = Math.floor(num / 10);
                    }
                    total += digitSum;
                }
            }
            return total;
        }
        // ุญุณุงุจ ุงููููุฉ ุงูููุงุฆูุฉ (ูู 1 ุฅูู 9)
        function reduceToSingleDigit(number) {
            while (number > 9) {
                number = number.toString().split('').reduce((sum, digit) => sum + parseInt(digit), 0);
            }
            return number;
        }
        // ุฅูุฌุงุฏ ุงุณู ูุทุงุจู ูู 1 ุฅูู 9
        function findMatchingAsma(word) {
            // ุญุณุงุจ ุฌููุน ุงูููู ุงูููููุฉ
            const calculations = [
                { name: 'ุงููุจูุฑ', calc: computeAbjad },
                { name: 'ุงูุตุบูุฑ', calc: computeAbjadWithLetterPosition },
                { name: 'ุงูุฃูุณุท', calc: computeAbjadWithLetterPositionSubtracted },
                { name: 'ุงูุฃุตุบุฑ', calc: computeAbjadWithLetterOrder }
            ];
            const results = [];
            for (const calc of calculations) {
                const gematria = calc.calc(word);
                const reducedGematria = reduceToSingleDigit(gematria);
                const matchingAsma = [];
                for (let i = 0; i < ASMA_UL_HUSNA.length; i++) {
                    const asma = ASMA_UL_HUSNA[i];
                    const asmaGematria = computeAbjad(asma);
                    const reducedAsmaGematria = reduceToSingleDigit(asmaGematria);
                    if (reducedAsmaGematria === reducedGematria) {
                        matchingAsma.push({ name: asma, num: i + 1 });
                    }
                    if (matchingAsma.length >= 9) {
                        break;
                    }
                }
                if (matchingAsma.length > 0) {
                    // ุชุฑุชูุจ ุงูุฃุณูุงุก ูู ุงูุฃุตุบุฑ ุฅูู ุงูุฃูุจุฑ
                    matchingAsma.sort((a, b) => a.num - b.num);
                    results.push({
                        calculation: calc.name,
                        gematria: gematria,
                        reducedGematria: reducedGematria,
                        matchingAsma: matchingAsma
                    });
                }
            }
            // ุชุฑุชูุจ ุงููุชุงุฆุฌ ุญุณุจ ุฃุตุบุฑ ุฑูู ุงุณู
            results.sort((a, b) => {
                const minA = Math.min(...a.matchingAsma.map(m => m.num));
                const minB = Math.min(...b.matchingAsma.map(m => m.num));
                return minA - minB;
            });
            return results.length > 0 ? results[0] : null;
        }
        function getAsmaByIndex(i) {
            const firstAsma = ASMA_UL_HUSNA[i] ? { name: ASMA_UL_HUSNA[i], num: i + 1 } : null;
            const secondAsmaIndex = i + 64;
            const secondAsma = (secondAsmaIndex < ASMA_UL_HUSNA.length) ?
                { name: ASMA_UL_HUSNA[secondAsmaIndex], num: secondAsmaIndex + 1 } : null;
            return { firstAsma, secondAsma };
        }
        function getWeekDayByIndex(i) {
            const d = WEEK_DAYS[i % WEEK_DAYS.length];
            return d;
        }
        function getKhadimByDayName(dayName) {
            return DAY_SERVANTS[dayName] || { upper: "โ", middle: "โ", lower: "โ" };
        }
        /* ---------- ุชูุงูู ุนูู ุงูุฑูู ---------- */
        function getRumalFormByIndex(idx) {
            // ุชุญุฏูุฏ ุงูุดูู ุงูุฑููู ุจูุงุกู ุนูู ุฑูู ุงูุฎุงูุฉ
            const formIndex = idx % RUMAL_FORMS.length;
            return RUMAL_FORMS[formIndex];
        }
        function renderRumalPattern(pattern) {
            return pattern.map(dots => {
                return `<div class="rumal-pattern">${Array(dots).fill(0).map(() => 
                    `<span class="rumal-dot ${dots === 2 ? 'double' : ''}"></span>`).join('')}</div>`;
            }).join('');
        }
        function calculateRumalNumber(idx) {
            // ุฎูุงุฑุฒููุฉ ุญุณุงุจ ุฃุฑูุงู ุงูุฑูู
            // ุฑูู ุงูุฑูู = (ุฑูู ุงูุฎุงูุฉ + ูููุฉ ุงูุฌูู ูููููุฉ) mod 16 + 1
            const word = words[idx];
            const gematria = word ? computeAbjad(word) : 0;
            return (idx + 1 + gematria) % 16 + 1;
        }
        /* ---------- ุชูุงูู ูุซูุซ ุงูุบุฒุงูู ---------- */
        function renderGhazaliTriangle() {
            ghazaliTriangle.innerHTML = '';
            AL_GHAZALI_TRIANGLE.forEach(row => {
                row.forEach(num => {
                    const cell = document.createElement('div');
                    cell.style.backgroundColor = '#071018';
                    cell.style.color = '#e74c3c';
                    cell.style.padding = '8px';
                    cell.style.borderRadius = '4px';
                    cell.style.fontWeight = 'bold';
                    cell.style.fontSize = '16px';
                    cell.textContent = num;
                    cell.style.textAlign = 'center';
                    ghazaliTriangle.appendChild(cell);
                });
            });
        }
        /* ---------- ุชูุงูู ุนููู ุงูุชุงูุงู ---------- */
        function calculateTafaq(idx) {
            const word = words[idx];
            const gematria = word ? computeAbjad(word) : 0;
            
            // ุญุณุงุจ ุงูุฌูู ุงููุจูุฑ
            const big = gematria;
            
            // ุญุณุงุจ ุงูุฌูู ุงูุตุบูุฑ
            const small = reduceToSingleDigit(gematria);
            
            // ุญุณุงุจ ุงูุฌูู ุงูุฃูุณุท
            const middle = (big + small) / 2;
            
            // ุญุณุงุจ ุฑูู ุงูุชูุงู
            const tafaqNumber = (big % 4) + 1; // 1-4 ููุซู ุงูุนูุงุตุฑ ุงูุฃุฑุจุนุฉ
            
            // ุชุญุฏูุฏ ุฏูุงูุฉ ุงูุชูุงู
            let meaning = "";
            switch(tafaqNumber) {
                case 1:
                    meaning = "ุชูุงู ูุงุฑู: ููููุฉ ูุงููุดุงุท ูุงูุจุฏุก";
                    break;
                case 2:
                    meaning = "ุชูุงู ุชุฑุงุจู: ููุงุณุชูุฑุงุฑ ูุงูุจูุงุก";
                    break;
                case 3:
                    meaning = "ุชูุงู ููุงุฆู: ููุชูุงุตู ูุงูุชูููุฑ";
                    break;
                case 4:
                    meaning = "ุชูุงู ูุงุฆู: ููุนุงุทูุฉ ูุงูุดูุงุก";
                    break;
                default:
                    meaning = "ูุง ููุฌุฏ ุชูุงู";
            }
            
            return {
                big: big,
                small: small,
                middle: middle,
                number: tafaqNumber,
                meaning: meaning
            };
        }
        /* ---------- ุฎูุงุฑุฒููุฉ ุงุณุชุฎุฑุงุฌ ุงูุฑุณุงูุฉ ูู ุงููููุฒ ูุงูุฃุณุฑุงุฑ ---------- */
        function extractMessageFromBoard() {
            // 1. ุฌูุน ุงูููู ูู ุงูุจูุงุทุงุช ุงูููุดููุฉ
            const revealedCells = [];
            for (let i = 0; i < TOTAL; i++) {
                if (revealed[i]) {
                    revealedCells.push({
                        index: i,
                        word: words[i],
                        gematria: computeAbjad(words[i]),
                        rumalNumber: calculateRumalNumber(i),
                        tafaq: calculateTafaq(i),
                        mansion: MOON_MANSIONS[i % 28],
                        houseInfo: housesInfo[i % 28]
                    });
                }
            }
            
            if (revealedCells.length === 0) {
                return "ูู ูุชู ูุดู ุฃู ุจูุงุทุงุช ุจุนุฏ. ูุฑุฌู ูุดู ุจุนุถ ุงูุจูุงุทุงุช ูุงุณุชุฎุฑุงุฌ ุงูุฑุณุงูุฉ.";
            }
            
            // 2. ุชุญููู ุงูููู ูุญุณุงุจ ุงูุฑุณุงูุฉ
            return analyzeRumalSecrets(revealedCells);
        }
        
        function analyzeRumalSecrets(revealedCells) {
            // 2.1 ุชุญููู ุชูุฒูุน ุงูุฑูู
            const rumalDistribution = {};
            const mansionDistribution = {};
            const tafaqDistribution = {};
            
            revealedCells.forEach(cell => {
                // ุชูุฒูุน ุฃุดูุงู ุงูุฑูู
                rumalDistribution[cell.rumalNumber] = (rumalDistribution[cell.rumalNumber] || 0) + 1;
                
                // ุชูุฒูุน ุงูููุงุฒู ุงูููุฑูุฉ
                const mansionIndex = cell.index % 28;
                mansionDistribution[mansionIndex] = (mansionDistribution[mansionIndex] || 0) + 1;
                
                // ุชูุฒูุน ุงูุชูุงู
                tafaqDistribution[cell.tafaq.number] = (tafaqDistribution[cell.tafaq.number] || 0) + 1;
            });
            
            // 2.2 ุชุญุฏูุฏ ุงูุดูู ุงูุฑููู ุงูุณุงุฆุฏ
            let dominantRumal = { number: 0, count: 0 };
            for (const [number, count] of Object.entries(rumalDistribution)) {
                if (count > dominantRumal.count) {
                    dominantRumal = { number: parseInt(number), count };
                }
            }
            
            // 2.3 ุชุญุฏูุฏ ุงูููุฒูุฉ ุงูููุฑูุฉ ุงูุณุงุฆุฏุฉ
            let dominantMansion = { index: 0, count: 0 };
            for (const [index, count] of Object.entries(mansionDistribution)) {
                if (count > dominantMansion.count) {
                    dominantMansion = { index: parseInt(index), count };
                }
            }
            
            // 2.4 ุชุญุฏูุฏ ุงูุชูุงู ุงูุณุงุฆุฏ
            let dominantTafaq = { number: 0, count: 0 };
            for (const [number, count] of Object.entries(tafaqDistribution)) {
                if (count > dominantTafaq.count) {
                    dominantTafaq = { number: parseInt(number), count };
                }
            }
            
            // 2.5 ุญุณุงุจ ุงูููู ุงูุนุฏุฏูุฉ
            const totalGematria = revealedCells.reduce((sum, cell) => sum + cell.gematria, 0);
            const avgGematria = totalGematria / revealedCells.length;
            const reducedGematria = reduceToSingleDigit(totalGematria);
            
            // 2.6 ุชุญููู ุฃุณูุงุก ุงููู ุงูุญุณูู ุงููุทุงุจูุฉ
            const wordGematrias = revealedCells.map(cell => cell.gematria);
            const asmaResults = [];
            for (const gem of wordGematrias) {
                const reduced = reduceToSingleDigit(gem);
                const matchingAsma = [];
                for (let i = 0; i < ASMA_UL_HUSNA.length; i++) {
                    const asma = ASMA_UL_HUSNA[i];
                    const asmaGematria = computeAbjad(asma);
                    const reducedAsma = reduceToSingleDigit(asmaGematria);
                    if (reducedAsma === reduced) {
                        matchingAsma.push({ name: asma, num: i + 1 });
                    }
                }
                if (matchingAsma.length > 0) {
                    asmaResults.push(matchingAsma[0]);
                }
            }
            
            // 2.7 ุชุญุฏูุฏ ุงูุฑุณุงูุฉ ุงูููุงุฆูุฉ
            return generateTreasureMessage(
                revealedCells, 
                dominantRumal, 
                dominantMansion, 
                dominantTafaq, 
                totalGematria, 
                avgGematria, 
                reducedGematria, 
                asmaResults
            );
        }
        
        function generateTreasureMessage(
            revealedCells, 
            dominantRumal, 
            dominantMansion, 
            dominantTafaq, 
            totalGematria, 
            avgGematria, 
            reducedGematria, 
            asmaResults
        ) {
            // 3.1 ุชุญุฏูุฏ ุณูุงู ุงูุฑุณุงูุฉ ุจูุงุกู ุนูู ุงูุชูุงู ุงูุณุงุฆุฏ
            let messageContext = "";
            let messageTone = "";
            let messageAdvice = "";
            
            switch(dominantTafaq.number) {
                case 1: // ุชูุงู ูุงุฑู
                    messageContext = "ุงูุฑุณุงูุฉ ุชุดูุฑ ุฅูู ููุฉ ููุดุงุท ูุจุฏุงูุฉ ุฌุฏูุฏุฉ. ููุงู ุทุงูุฉ ูููุฉ ุชุฏูุนู ุฅูู ุงูุฃูุงู.";
                    messageTone = "ุชุดุฌูุนูุฉ ูุญุงุฒูุฉ";
                    messageAdvice = "ุงุณุชุบู ูุฐู ุงูุทุงูุฉ ุงููุงุฑูุฉ ูุจุฏุก ูุดุฑูุน ุฌุฏูุฏ ุฃู ูุชุญููู ูุฏู ุทุงู ุงูุชุธุงุฑู. ุชุฌูุจ ุงูุชุณุฑุน ูุญุงูุธ ุนูู ุชุฑููุฒู.";
                    break;
                case 2: // ุชูุงู ุชุฑุงุจู
                    messageContext = "ุงูุฑุณุงูุฉ ุชุดูุฑ ุฅูู ุงุณุชูุฑุงุฑ ูุจูุงุก ูุชูุทูุฏ ุงูุฃุณุณ. ุงูููุช ููุงุณุจ ูุชุนุฒูุฒ ูุง ุจููุชู.";
                    messageTone = "ูุงุฏุฆุฉ ููุทูุฆูุฉ";
                    messageAdvice = "ุฑูุฒ ุนูู ุชุนุฒูุฒ ุงูุงุณุชูุฑุงุฑ ูู ุญูุงุชู. ุงุณุชุซูุฑ ูู ุงููุดุงุฑูุน ุทูููุฉ ุงูุฃูุฏ ูุงุจูู ุฃุณุงุณุงุช ูููุฉ ููุณุชูุจู ูุฒุฏูุฑ.";
                    break;
                case 3: // ุชูุงู ููุงุฆู
                    messageContext = "ุงูุฑุณุงูุฉ ุชุดูุฑ ุฅูู ุชูุงุตู ูุชูููุฑ ูุฅุจุฏุงุน. ููุงู ูุฑุต ููุชูุงุตู ูุงูุชุนูู.";
                    messageTone = "ุชูุงุคููุฉ ููุดุฌุนุฉ";
                    messageAdvice = "ุงุณุชุฎุฏู ูุฐู ุงูุทุงูุฉ ุงูููุงุฆูุฉ ููุชูุงุตู ูุน ุงูุขุฎุฑูู ูุชุจุงุฏู ุงูุฃููุงุฑ. ูุฏ ุชุฃุชู ุงูุญููู ูู ุฎูุงู ุงูุญูุงุฑ ูุงูุชูููุฑ ุงูููุทูู.";
                    break;
                case 4: // ุชูุงู ูุงุฆู
                    messageContext = "ุงูุฑุณุงูุฉ ุชุดูุฑ ุฅูู ุนุงุทูุฉ ูุดูุงุก ูุนูู. ุงูููุช ููุงุณุจ ููุชุฃูู ูููู ุงููุดุงุนุฑ.";
                    messageTone = "ุนุงุทููุฉ ูุนูููุฉ";
                    messageAdvice = "ุงุณุชูุน ุฅูู ุญุฏุณู ูุงูุธุฑ ุฅูู ุงูุฃููุฑ ูู ููุธูุฑ ุฃุนูู. ูุฏ ุชุญุชุงุฌ ุฅูู ุดูุงุก ููุณู ุฃู ุนุงุทูู ูุจู ุงููุถู ูุฏูุงู.";
                    break;
                default:
                    messageContext = "ุงูุฑุณุงูุฉ ุชุญุชูู ุนูู ุทุงูุฉ ูุฎุชูุทุฉ. ุชุญุชุงุฌ ุฅูู ุชุญููู ูุชูุงุฒู.";
                    messageTone = "ูุญุงูุฏุฉ ููุชูุงุฒูุฉ";
                    messageAdvice = "ุงุณุชุฎุฏู ุงูุญููุฉ ูุชูุงุฒู ุจูู ูุฎุชูู ุงูุฌูุงูุจ ูู ุญูุงุชู. ูุง ุชุณุชุนุฌู ุงููุฑุงุฑ ูุฎุฐ ุงูููุช ุงููุงูู ูููู ุงูุฑุณุงูุฉ ุจุดูู ูุงูู.";
            }
            
            // 3.2 ุชุญุฏูุฏ ุฏูุงูุฉ ุงูุฑูู ุงููุฎุชุตุฑ (ูู 1 ุฅูู 9)
            let reducedMeaning = "";
            switch(reducedGematria) {
                case 1: 
                    reducedMeaning = "ุงูุจุฏุงูุงุช ุงูุฌุฏูุฏุฉุ ุงููุญุฏุฉุ ุงูุฅุฑุงุฏุฉ ุงููููุฉ. ุงูุฑุณุงูุฉ ุชุดูุฑ ุฅูู ุจุฏุงูุฉ ุฏูุฑุฉ ุฌุฏูุฏุฉ ูู ุญูุงุชู.";
                    break;
                case 2:
                    reducedMeaning = "ุงูุชูุงุฒูุ ุงูุชุนุงููุ ุงูุซูุงุฆูุงุช. ุงูุฑุณุงูุฉ ุชุดูุฑ ุฅูู ุฃูููุฉ ุงูุชูุงุฒู ูุงูุดุฑุงูุฉ ูู ูุง ุชูุนูู.";
                    break;
                case 3:
                    reducedMeaning = "ุงูุฅุจุฏุงุนุ ุงูุชุนุจูุฑุ ุงูุงุจุชูุงุฑ. ุงูุฑุณุงูุฉ ุชุดุฌุนู ุนูู ุงูุชุนุจูุฑ ุนู ููุณู ูุฅุธูุงุฑ ุฅุจุฏุงุนู.";
                    break;
                case 4:
                    reducedMeaning = "ุงูุงุณุชูุฑุงุฑุ ุงูุจููุฉุ ุงูุชุฃุณูุณ. ุงูุฑุณุงูุฉ ุชุดูุฑ ุฅูู ุฃูููุฉ ุจูุงุก ุฃุณุงุณ ูุชูู ููุดุงุฑูุนู.";
                    break;
                case 5:
                    reducedMeaning = "ุงูุญุฑูุฉุ ุงูุชุบููุฑุ ุงููุบุงูุฑุฉ. ุงูุฑุณุงูุฉ ุชุดุฌุนู ุนูู ุงูุชุบููุฑ ูุงูุงููุชุงุญ ุนูู ุงูุฌุฏูุฏ.";
                    break;
                case 6:
                    reducedMeaning = "ุงููุณุคูููุฉุ ุงูุญุจุ ุงูุชูุงุฒู. ุงูุฑุณุงูุฉ ุชุดูุฑ ุฅูู ุฃูููุฉ ุงูุนูุงูุฉ ุจุงูุนูุงูุงุช ูุงูุงูุชุฒุงูุงุช.";
                    break;
                case 7:
                    reducedMeaning = "ุงูุชุฃููุ ุงูุฑูุญุงููุฉุ ุงูุจุญุซ. ุงูุฑุณุงูุฉ ุชุดุฌุนู ุนูู ุงูุจุญุซ ุนู ุงูุญูููุฉ ูุงูุชุฃูู ูู ุญูุงุชู.";
                    break;
                case 8:
                    reducedMeaning = "ุงููุฌุงุญ ุงููุงุฏูุ ุงูุณูุทุฉุ ุงูุชูุงุฒู. ุงูุฑุณุงูุฉ ุชุดูุฑ ุฅูู ุชุญููู ุงูุชูุงุฒู ุจูู ุงููุงุฏู ูุงููุนููู.";
                    break;
                case 9:
                    reducedMeaning = "ุงูุงูุชูุงูุ ุงูุฑุญูุฉุ ุงูุฎุชุงู. ุงูุฑุณุงูุฉ ุชุดูุฑ ุฅูู ููุงูุฉ ุฏูุฑุฉ ูุชุญุถูุฑ ูุจุฏุงูุฉ ุฌุฏูุฏุฉ.";
                    break;
                default:
                    reducedMeaning = "ุงูุฑุณุงูุฉ ุชุญูู ุทุงูุฉ ุฎุงุตุฉ ุชุญุชุงุฌ ุฅูู ุชูุณูุฑ ุฏููู.";
            }
            
            // 3.3 ุชุญุฏูุฏ ุฃุณูุงุก ุงููู ุงูุญุณูู ุงููููุฉ
            let asmaMessage = "ุงูุฃุณูุงุก ุงูุฅูููุฉ ุงููุฑุชุจุทุฉ ุจุงูุฑุณุงูุฉ: ";
            if (asmaResults.length > 0) {
                const uniqueAsma = [...new Set(asmaResults.map(a => a.name))];
                asmaMessage += uniqueAsma.slice(0, 3).join(", ");
                if (uniqueAsma.length > 3) {
                    asmaMessage += " ูุบูุฑูุง...";
                }
            } else {
                asmaMessage += "ุงูููุ ุงูุฑุญููุ ุงูุฑุญูู";
            }
            
            // 3.4 ุชุญุฏูุฏ ุงูููุฒูุฉ ุงูููุฑูุฉ ุงูุณุงุฆุฏุฉ
            const mansion = MOON_MANSIONS[dominantMansion.index];
            const houseInfo = housesInfo[dominantMansion.index];
            
            let mansionMessage = `
                <strong>ุงูููุฒูุฉ ุงูููุฑูุฉ ุงูุณุงุฆุฏุฉ:</strong> ${mansion.name} (${dominantMansion.index + 1})<br>
                <strong>ุงูุฏูุงูุฉ:</strong> ${mansion.meaning}<br>
                <strong>ุงูุทุงูุฉ:</strong> ${houseInfo.energy}<br>
                <strong>ุงูุชุฃุซูุฑ:</strong> ${houseInfo.influence}
            `;
            
            // 3.5 ุชุญุฏูุฏ ุงูุดูู ุงูุฑููู ุงูุณุงุฆุฏ
            const rumalForm = RUMAL_FORMS[dominantRumal.number - 1];
            
            let rumalMessage = `
                <strong>ุงูุดูู ุงูุฑููู ุงูุณุงุฆุฏ:</strong> ${rumalForm.name} (${dominantRumal.number})<br>
                <strong>ุงูุฏูุงูุฉ:</strong> ${rumalForm.meaning}
            `;
            
            // 3.6 ุชุญุฏูุฏ ุงูุชูุงู ุงูุณุงุฆุฏ
            const tafaqMeaning = calculateTafaq(0).meaning; // ุณูุชู ุชุญุฏูุซู ูู ุงูุงุณุชุฏุนุงุก ุงููุนูู
            
            let tafaqMessage = `
                <strong>ุงูุชูุงู ุงูุณุงุฆุฏ:</strong> ${dominantTafaq.number}<br>
                <strong>ุงูุฏูุงูุฉ:</strong> ${tafaqMeaning}
            `;
            
            // 3.7 ุจูุงุก ุงูุฑุณุงูุฉ ุงูููุงุฆูุฉ
            return `
                <div style="font-weight: bold; color: #e74c3c; margin-bottom: 10px;">ุงูุฑุณุงูุฉ ูู ุงููููุฒ ูุงูุฃุณุฑุงุฑ</div>
                <div style="margin-bottom: 15px; line-height: 1.5;">
                    <div style="margin-bottom: 10px;">
                        <strong>ุงูุณูุงู ุงูุนุงู:</strong> ${messageContext}<br>
                        <strong>ูุจุฑุฉ ุงูุฑุณุงูุฉ:</strong> ${messageTone}<br>
                        <strong>ุงููุตูุญุฉ ุงูุฑุฆูุณูุฉ:</strong> ${messageAdvice}
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong>ุงูุฏูุงูุฉ ุงูุนุฏุฏูุฉ:</strong> ${reducedGematria}<br>
                        ${reducedMeaning}
                    </div>
                    <div style="margin-bottom: 10px;">
                        ${asmaMessage}
                    </div>
                    <div style="margin-bottom: 10px;">
                        ${mansionMessage}
                    </div>
                    <div style="margin-bottom: 10px;">
                        ${rumalMessage}
                    </div>
                    <div style="margin-bottom: 10px;">
                        ${tafaqMessage}
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong>ุงูุฎูุงุตุฉ:</strong> ุงูุฑุณุงูุฉ ุงููุณุชุฎูุตุฉ ูู ุงูุจูุงุทุงุช ุงูููุดููุฉ ุชุดูุฑ ุฅูู ุฃู ุงูููุช ููุงุณุจ ${mansion.meaning.toLowerCase()} 
                        ูุน ุงูุงุณุชูุงุฏุฉ ูู ุทุงูุฉ ${rumalForm.name} ูุชูุนูู ููุฉ ${tafaqMeaning.split(':')[0]}. 
                        ุงุณุชุฎุฏู ุฃุณูุงุก ุงููู ุงูุญุณูู ุงููุฐููุฑุฉ ูุชุนุฒูุฒ ุชุฃุซูุฑ ุงูุฑุณุงูุฉ ูู ุญูุงุชู.
                    </div>
                </div>
            `;
        }
        
        /* ---------- ุจูุงุก ุงูููุญุฉ ---------- */
        function buildGrid() {
            gridEl.innerHTML = '';
            cells = [];
            for (let idx = 0; idx < TOTAL; idx++) {
                const cell = document.createElement('div');
                cell.className = 'cell hidden';
                cell.dataset.index = idx;
                cell.dataset.house = idx % 28;
                const num = document.createElement('div');
                num.className = 'meta-num';
                num.innerHTML = String(idx + 1);
                cell.appendChild(num);
                const letterDiv = document.createElement('div');
                letterDiv.className = 'meta-letter';
                const letter = arabicLetters[idx % arabicLetters.length];
                letterDiv.innerHTML = letter;
                cell.appendChild(letterDiv);
                const tower = document.createElement('div');
                tower.className = 'meta-tower';
                const towerIdx = (idx % 12);
                const sign = zodiacSigns[towerIdx];
                const elementClass = elementColors[sign.element];
                tower.innerHTML = `<span class="${elementClass}">${sign.name} (${towerIdx + 1})</span>`;
                cell.appendChild(tower);
                const wordEl = document.createElement('div');
                wordEl.className = 'word';
                wordEl.innerText = words[idx] || '';
                cell.appendChild(wordEl);
                const gemEl = document.createElement('div');
                gemEl.className = 'gematria';
                gemEl.innerText = words[idx] ? computeAbjad(words[idx]) : '';
                cell.appendChild(gemEl);
                const extras = document.createElement('div');
                extras.className = 'extras';
                extras.innerHTML = renderExtras(idx);
                cell.appendChild(extras);
                // โจ ุฅุถุงูุฉ ุงูุฑูุฒ ุงูููุฏุณู ูู ูุชุณูุณูุฉ ููุจููุงุชุดู
                const reducedValue = reduceToSingleDigit(FIBONACCI_SEQUENCE[idx] || idx + 1);
                const geomCls = `symbol symbol-${reducedValue || 1}`;
                const geomSymb = document.createElement('div');
                geomSymb.className = 'geometry ' + geomCls;
                cell.appendChild(geomSymb);
                // โจ ุฅุถุงูุฉ ุงูููุงู ุงููููู (ุงููููุ ุงูููุญุ ุงููุฑุณูุ ุงูุนุฑุด)
                if (idx % 7 === 0) {
                    const cosmicTag = document.createElement('div');
                    cosmicTag.className = 'cosmic-tag';
                    cosmicTag.innerText = ['ุงูููู', 'ุงูููุญ', 'ุงููุฑุณู', 'ุงูุนุฑุด'][idx % 4];
                    cell.appendChild(cosmicTag);
                }
                cell.addEventListener('mouseenter', onCellHover);
                cell.addEventListener('click', onCellClick);
                cell.addEventListener('dblclick', onCellDoubleClick);
                cell.addEventListener('contextmenu', onCellRightClick);
                gridEl.appendChild(cell);
                cells.push(cell);
            }
            applyAllBlackColors();
            updateStatus();
            buildRowNumbers();
            renderRainbowLegend();
            renderRumalForms();
            renderGhazaliTriangle();
        }
        function renderExtras(idx) {
            const asma = getAsmaByIndex(idx);
            const firstSurah = SURAHS[idx];
            const secondSurahIndex = idx + 65;
            const secondSurah = (secondSurahIndex <= 114) ? SURAHS[secondSurahIndex - 1] : null;
            const word = words[idx];
            const matchingAsmaResult = word ? findMatchingAsma(word) : null;
            
            // ุญุณุงุจ ุฃุฑูุงู ุงูุฑูู
            const rumalNumber = calculateRumalNumber(idx);
            const rumalForm = getRumalFormByIndex(idx);
            
            // ุญุณุงุจ ุงูุชุงูุงู
            const tafaq = calculateTafaq(idx);
            
            // ุชุฌููุฒ ุงููุต ูุนุฑุถ ุงููุชุงุฆุฌ
            let matchingAsmaHTML = '';
            if (matchingAsmaResult) {
                const minAsma = Math.min(...matchingAsmaResult.matchingAsma.map(m => m.num));
                matchingAsmaHTML = `
                    <div class="part asm">
                        <strong>ุงูุงุณู ุงููุทุงุจู (ุงูุฃุตุบุฑ: ${minAsma}):</strong>
                        ${matchingAsmaResult.matchingAsma.map(asma => 
                            `${asma.name} <span class="asm-num">(${asma.num})</span>`
                        ).join('<br>')}
                    </div>
                    <div class="part calc-method">
                        <strong>ุงูุญุณุงุจ ุงููุณุชุฎุฏู: ${matchingAsmaResult.calculation}</strong>
                        <div style="font-size:10px; margin-top:2px">ุงููููุฉ: ${matchingAsmaResult.gematria} (ููุฎุชุตุฑ: ${matchingAsmaResult.reducedGematria})</div>
                    </div>
                `;
            }
            
            return `
                <div class="part asm">
                    ${asma.firstAsma ? asma.firstAsma.name + ' <span class="asm-num">(' + asma.firstAsma.num + ')</span>' : ''}
                    ${asma.secondAsma ? '<br>' + asma.secondAsma.name + ' <span class="asm-num">(' + asma.secondAsma.num + ')</span>' : ''}
                </div>
                ${matchingAsmaHTML}
                <div class="part rumal">
                    <strong>ุฑูู ุงูุฑูู: ${rumalNumber}</strong>
                    <div style="font-size:10px; margin-top:2px">ุงูุดูู: ${rumalForm.name} (${rumalForm.meaning})</div>
                </div>
                <div class="part tafaq">
                    <strong>ุงูุชูุงู: ${tafaq.number}</strong>
                    <div style="font-size:10px; margin-top:2px">ุงูุฏูุงูุฉ: ${tafaq.meaning}</div>
                </div>
                <div class="part surah">
                    ุณูุฑุฉ: ${firstSurah} (${idx + 1})
                    ${secondSurah ? '<br>ุณูุฑุฉ: ' + secondSurah + ' (' + secondSurahIndex + ')' : ''}
                </div>
                <div class="part day">ุงูููู: ${getWeekDayByIndex(idx).num} โ ${getWeekDayByIndex(idx).name} โข ุงููููุจ: ${getWeekDayByIndex(idx).planet}</div>
                <div class="part kh">ุฎุฏุงู: ุงูุนููู: ${getKhadimByDayName(getWeekDayByIndex(idx).name).upper} โข ุงููุณุทู: ${getKhadimByDayName(getWeekDayByIndex(idx).name).middle} โข ุงูุณููู: ${getKhadimByDayName(getWeekDayByIndex(idx).name).lower}</div>
            `;
        }
        function updateExtras(idx) {
            const el = cells[idx].querySelector('.extras');
            if (el) el.innerHTML = renderExtras(idx);
        }
        function buildRowNumbers() {
            rowNumbersEl.innerHTML = '';
            for (let i = 1; i <= BOARD; i++) {
                const div = document.createElement('div');
                div.textContent = i;
                rowNumbersEl.appendChild(div);
            }
        }
        /* ---------- ุนุฑุถ ุฃุดูุงู ุงูุฑูู ---------- */
        function renderRumalForms() {
            rumalForms.innerHTML = '';
            RUMAL_FORMS.forEach(form => {
                const formEl = document.createElement('div');
                formEl.style.backgroundColor = '#071018';
                formEl.style.borderRadius = '8px';
                formEl.style.padding = '8px';
                formEl.style.textAlign = 'center';
                formEl.style.color = '#fff';
                
                const patternHTML = form.pattern.map(dots => {
                    return `<div class="rumal-pattern">${Array(dots).fill(0).map(() => 
                        `<span class="rumal-dot ${dots === 2 ? 'double' : ''}"></span>`).join('')}</div>`;
                }).join('');
                
                formEl.innerHTML = `
                    <div style="font-weight:bold; color:${form.color}; margin-bottom:4px;">${form.name}</div>
                    <div style="margin-bottom:4px;">${patternHTML}</div>
                    <div style="font-size:10px; opacity:0.8;">${form.meaning}</div>
                `;
                rumalForms.appendChild(formEl);
            });
        }
        /* ---------- ุชุนุฏูู ุงูุฃููุงู ูุชููู ุฌููุนูุง ุณูุฏุงุก ---------- */
        function applyAllBlackColors() {
            for (let idx = 0; idx < TOTAL; idx++) {
                assignedClass[idx] = 'c-black';
                cells[idx].className = 'cell hidden c-black';
                cells[idx].querySelector('.word').innerText = words[idx] || '';
                cells[idx].querySelector('.gematria').innerText = words[idx] ? computeAbjad(words[idx]) : '';
                updateExtras(idx);
            }
        }
        /* ---------- ุชุญููู ุจูู index ู row/col ---------- */
        function indexToRC(idx) {
            const row = Math.floor(idx / BOARD);
            const col = BOARD - 1 - (idx % BOARD);
            return { r: row, c: col };
        }
        function rcToIndex(row, col) {
            return row * BOARD + (BOARD - 1 - col);
        }
        /* ---------- ุชูููู ุนุดูุงุฆู ูุฃููุงู ุงูุทูู ---------- */
        function randomColoring() {
            for (let i = 0; i < TOTAL; i++) {
                const cls = baseClasses[Math.floor(Math.random() * baseClasses.length)];
                assignedClass[i] = cls;
                cells[i].className = 'cell hidden ' + cls;
            }
        }
        function rainbowColoring() {
            for (let i = 0; i < TOTAL; i++) {
                const obj = rainbow[i % rainbow.length];
                cells[i].className = 'cell hidden ' + obj.cls;
                assignedClass[i] = obj.cls;
            }
        }
        /* ---------- ูุดู/ุฅุฎูุงุก ---------- */
        function revealIndex(i) {
            if (i < 0 || i >= TOTAL) return;
            if (!revealed[i]) {
                revealed[i] = true;
                cells[i].classList.remove('hidden');
                cells[i].classList.add('visible');
                cells[i].querySelector('.word').innerText = words[i] || '';
                cells[i].querySelector('.gematria').innerText = words[i] ? computeAbjad(words[i]) : '';
                updateExtras(i);
                updateStatus();
            }
        }
        function hideIndex(i) {
            if (i < 0 || i >= TOTAL) return;
            if (revealed[i]) {
                revealed[i] = false;
                cells[i].classList.remove('visible');
                cells[i].classList.add('hidden');
                updateStatus();
            }
        }
        function revealNext() {
            if (currentIndex >= TOTAL) return;
            revealIndex(currentIndex);
            currentIndex++;
        }
        function revealPrev() {
            if (currentIndex <= 0) return;
            currentIndex--;
            hideIndex(currentIndex);
        }
        /* ---------- ุชูุงุนูุงุช ุงููุฃุฑุฉ ูุงูููุฑ ---------- */
        let lastRevealTime = 0, throttle = 80;
        function onCellHover(e) {
            if (modeSelect.value !== 'hover') return;
            const now = Date.now();
            if (now - lastRevealTime < throttle) return;
            lastRevealTime = now;
            revealNext();
        }
        function onCellClick(e) {
            if (modeSelect.value !== 'click') return;
            const idx = Number(this.dataset ? this.dataset.index : e.currentTarget.dataset.index);
            revealIndex(idx);
            if (idx >= currentIndex) currentIndex = idx + 1;
        }
        /* ---------- ุนุฑุถ ุงูููุฒู ุงูููุฑู ูุงูุฎุงุชู ุงูุณูููุงูู ุนูุฏ ุงูุถุบุท ุงููุฒุฏูุฌ ---------- */
        function onCellDoubleClick(e) {
            const idx = Number(this.dataset.index);
            const houseIndex = parseInt(this.dataset.house);
            const info = housesInfo[houseIndex];
            const letter = arabicLetters[houseIndex];
            const zodiacIndex = houseIndex % 12;
            const zodiac = zodiacSigns[zodiacIndex];
            const elementClass = elementColors[zodiac.element];
            const gematria = abjadMap[letter] || (houseIndex + 1);
            houseCycleCount = Math.floor(houseIndex / 28) + 1;
            const mansion = MOON_MANSIONS[houseIndex];
            const seal = mansion.seal || {};
            const rumalForm = getRumalFormByIndex(houseIndex);
            const tafaq = calculateTafaq(houseIndex);
            
            modalHouseName.textContent = `${houseIndex + 1}. ${info.name}`;
            modalHouseNumber.textContent = houseIndex + 1;
            modalHouseLetter.textContent = letter;
            modalHouseZodiac.innerHTML = `${zodiac.name} (${zodiacIndex + 1}) - <span class="${elementClass}">${zodiac.element}</span>`;
            modalHouseGematria.textContent = gematria;
            modalHouseCycle.textContent = houseCycleCount;
            modalHouseEnergy.textContent = info.energy;
            modalHouseInfluence.textContent = info.influence;
            modalHouseBenefits.textContent = info.benefits;
            modalHouseChallenges.textContent = info.challenges;
            modalMansionName.textContent = mansion.name;
            modalMansionLetter.textContent = mansion.letter;
            modalMansionAngle.textContent = `${mansion.angle.toFixed ? mansion.angle.toFixed(2) : mansion.angle}ยฐ`;
            modalMansionMeaning.textContent = mansion.meaning;
            modalSealWar.textContent = seal.war || "โ";
            modalSealTalisman.textContent = seal.talisman || "โ";
            modalSealLetterPower.textContent = seal.letterPower || "โ";
            modalSealArabicNames.textContent = seal.arabicNames || "โ";
            modalSealSyriacNames.textContent = seal.syriacNames || "โ";
            modalSealDays.textContent = seal.days || "โ";
            modalSealStars.textContent = seal.stars || "โ";
            modalSealAdhesives.textContent = seal.adhesives || "โ";
            modalSealEarthlyHelpers.textContent = seal.earthlyHelpers || "โ";
            modalSealHeavenlyKings.textContent = seal.heavenlyKings || "โ";
            
            // ุชุนุจุฆุฉ ุจูุงูุงุช ุนูู ุงูุฑูู
            modalRumalForm.textContent = rumalForm.name;
            modalRumalPattern.innerHTML = '';
            rumalForm.pattern.forEach(dots => {
                const patternDiv = document.createElement('div');
                patternDiv.className = 'rumal-pattern';
                for (let i = 0; i < dots; i++) {
                    const dot = document.createElement('span');
                    dot.className = `rumal-dot ${dots === 2 ? 'double' : ''}`;
                    patternDiv.appendChild(dot);
                }
                modalRumalPattern.appendChild(patternDiv);
            });
            modalRumalMeaning.textContent = rumalForm.meaning;
            
            // ุชุนุจุฆุฉ ุจูุงูุงุช ุงูุชูุงู
            modalTafaqBig.textContent = tafaq.big;
            modalTafaqSmall.textContent = tafaq.small;
            modalTafaqMiddle.textContent = tafaq.middle.toFixed(1);
            modalTafaqNumber.textContent = tafaq.number;
            modalTafaqMeaning.textContent = tafaq.meaning;
            
            houseModal.style.display = "flex";
        }
        /* ---------- ุชุญุฏูุฏ ุงููุต ูุงููุณุฎ ุนูุฏ ุงูุถุบุท ุจุงูุฒุฑ ุงูุฃููู ---------- */
        function onCellRightClick(e) {
            e.preventDefault(); // ููุน ุธููุฑ ูุงุฆูุฉ ุงูุณูุงู ุงูุงูุชุฑุงุถูุฉ
            const now = Date.now();
            const cell = this;
            const idx = Number(cell.dataset.index);
            // ุฅุฐุง ูุงูุช ููุงู ุฎููุฉ ูุญุฏุฏุฉ ูุณุจููุง
            if (selectedCell && selectedCell !== cell) {
                selectedCell.classList.remove('text-selected');
                selectedCell = null;
            }
            // ุชุญุฏูุฏ ุงูุฎููุฉ ุงูุฌุฏูุฏุฉ
            if (!cell.classList.contains('text-selected')) {
                cell.classList.add('text-selected');
                selectedCell = cell;
                lastRightClickTime = now;
            } 
            // ุฅุฐุง ูุงูุช ุงูุฎููุฉ ูุญุฏุฏุฉ ูุณุจููุง ูุงูุถุบุท ุงูุซุงูู ุฎูุงู 500 ูููู ุซุงููุฉ
            else if (now - lastRightClickTime < 500) {
                // ูุณุฎ ุงููุต ุฅูู ุงูุญุงูุธุฉ
                copyCellContent(cell);
                // ุฅูุบุงุก ุงูุชุญุฏูุฏ
                cell.classList.remove('text-selected');
                selectedCell = null;
                lastRightClickTime = 0;
            }
        }
        function copyCellContent(cell) {
            const idx = Number(cell.dataset.index);
            const word = words[idx];
            const gematria = computeAbjad(word);
            const letter = cell.querySelector('.meta-letter').innerText;
            const zodiac = cell.querySelector('.meta-tower').innerText;
            const asma = cell.querySelector('.extras .asm').innerText;
            const surah = cell.querySelector('.extras .surah').innerText;
            const day = cell.querySelector('.extras .day').innerText;
            const kh = cell.querySelector('.extras .kh').innerText;
            const rumal = cell.querySelector('.extras .rumal').innerText;
            const tafaq = cell.querySelector('.extras .tafaq').innerText;
            
            const contentToCopy = `
                ุงููููุฉ: ${word}
                ูููุฉ ุงูุฌูู: ${gematria}
                ุงูุญุฑู: ${letter}
                ุงูุจุฑุฌ: ${zodiac}
                ุงูุฃุณูุงุก: ${asma}
                ุฃุฑูุงู ุงูุฑูู: ${rumal}
                ุงูุชูุงู: ${tafaq}
                ุงูุณูุฑ: ${surah}
                ุงูููู: ${day}
                ุงูุฎุฏุงู: ${kh}
            `.replace(/^\s+/gm, ''); // ุฅุฒุงูุฉ ุงููุณุงูุงุช ุงูุฒุงุฆุฏุฉ ูู ุจุฏุงูุฉ ูู ุณุทุฑ
            
            navigator.clipboard.writeText(contentToCopy).then(() => {
                // ุฅุธูุงุฑ ูุคุดุฑ ูุณุฎ ูุงุฌุญ
                cell.style.boxShadow = '0 0 10px rgba(0, 255, 0, 0.7)';
                setTimeout(() => {
                    cell.style.boxShadow = '';
                }, 500);
                // ุฅุธูุงุฑ ุฑุณุงูุฉ ูุคูุชุฉ
                const notification = document.createElement('div');
                notification.style.position = 'fixed';
                notification.style.top = '20px';
                notification.style.right = '20px';
                notification.style.background = '#4CAF50';
                notification.style.color = 'white';
                notification.style.padding = '10px 15px';
                notification.style.borderRadius = '5px';
                notification.style.zIndex = '1000';
                notification.textContent = `ุชู ูุณุฎ: ${word || 'ุจูุง ูุญุชูู'}`;
                document.body.appendChild(notification);
                setTimeout(() => {
                    notification.style.opacity = '0';
                    notification.style.transition = 'opacity 0.5s';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            document.body.removeChild(notification);
                        }
                    }, 500);
                }, 1500);
            }).catch(err => {
                console.error('ูุดู ูู ูุณุฎ ุงููุต: ', err);
            });
        }
        /* ---------- ุชุญููู ุงููุต ูุชูุณูู ุงููููุงุช ---------- */
        function loadWordsFromField() {
            const raw = textInput.value.trim();
            const arr = splitToWords(raw);
            for (let i = 0; i < TOTAL; i++) {
                words[i] = arr[i] || '';
                revealed[i] = false;
            }
            currentIndex = 0;
            for (let i = 0; i < TOTAL; i++) {
                cells[i].querySelector('.word').innerText = words[i] || '';
                cells[i].querySelector('.gematria').innerText = words[i] ? computeAbjad(words[i]) : '';
                updateExtras(i);
            }
            applyAllBlackColors();
            updateStatus();
        }
        /* ---------- ุฃุฒุฑุงุฑ / ููุงุชูุญ ---------- */
        document.getElementById('btnLoadFromInput').addEventListener('click', loadWordsFromField);
        document.getElementById('btnFillDemo').addEventListener('click', () => {
            const sample = Array.from({ length: 64 }, (_, i) => `ูููุฉ${i + 1}`).join(' ');
            textInput.value = sample;
            loadWordsFromField();
        });
        document.getElementById('btnRandom').addEventListener('click', randomColoring);
        document.getElementById('btnSpectrum').addEventListener('click', rainbowColoring);
        document.getElementById('btnReset').addEventListener('click', () => {
            words = Array.from({ length: TOTAL }, () => '');
            assignedClass = new Array(TOTAL).fill(null);
            revealed = new Array(TOTAL).fill(false);
            currentIndex = 0;
            for (let i = 0; i < TOTAL; i++) {
                cells[i].className = 'cell hidden';
                cells[i].querySelector('.word').innerText = '';
                cells[i].querySelector('.gematria').innerText = '';
                updateExtras(i);
            }
            applyAllBlackColors();
            updateStatus();
        });
        document.getElementById('btnNext').addEventListener('click', revealNext);
        document.getElementById('btnPrev').addEventListener('click', revealPrev);
        document.getElementById('btnSubmit').addEventListener('click', () => {
            const done = revealed.filter(Boolean).length === TOTAL;
            if (!done) {
                alert('ูู ุชูุชุดู ูู ุงูุฎุงูุงุช ุจุนุฏ. ุงููู ุฃู ุงุถุบุท ุงูุชุงูู ุญุชู ุชูุชูู 64.');
                return;
            }
            const w = window.open('', '_blank');
            const list = words.map((wrd, i) => `<li>${i + 1}. ${escapeHtml(wrd || '')} โ ${computeAbjad(wrd || '')}</li>`).join('');
            w.document.write(`<html dir="rtl" lang="ar"><head><meta charset="utf-8"><title>ูุชูุฌุฉ ุงูููุญุฉ</title>
                <style>body{font-family:Tahoma,Arial;color:#000;background:#fff;padding:18px}</style></head><body>
                <h2 style="text-align:center">ูุงุฆูุฉ ุงููููุงุช ูููู ุงูุฌูููู ุงููุจูุฑ</h2><ol>${list}</ol></body></html>`);
            w.document.close();
        });
        document.getElementById('btnLoad').addEventListener('click', loadWordsFromField);
        
        // ุฒุฑ ุงุณุชุฎุฑุงุฌ ุงูุฑุณุงูุฉ
        btnExtractMessage.addEventListener('click', () => {
            const message = extractMessageFromBoard();
            treasureMessage.innerHTML = message;
        });
        /* ---------- ุงูุชุญูู ุจุงููุงูุณ ูุงูุฃุณูู ููุชูุจูุฑ ูุงูุชุตุบูุฑ ---------- */
        let isDragging = false;
        let startX, startY, startTransformX = 0, startTransformY = 0;
        gridEl.addEventListener('mousedown', (e) => {
            if (e.button !== 0) return;
            isDragging = true;
            startX = e.clientX;
            startY = e.clientY;
            const transform = window.getComputedStyle(gridEl).transform;
            if (transform !== 'none') {
                const values = transform.split('(')[1].split(')')[0].split(',');
                startTransformX = parseFloat(values[4]);
                startTransformY = parseFloat(values[5]);
            }
        });
        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            const dx = e.clientX - startX;
            const dy = e.clientY - startY;
            gridEl.style.transform = `translate(${startTransformX + dx}px, ${startTransformY + dy}px)`;
        });
        document.addEventListener('mouseup', () => {
            isDragging = false;
        });
        document.addEventListener('mouseleave', () => {
            isDragging = false;
        });
        function changeCellSize(delta) {
            let current = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--cell-size'));
            let next = Math.min(2500, Math.max(40, current + delta));
            document.documentElement.style.setProperty('--cell-size', next + 'px');
            sizeRange.value = next;
            sizeValue.innerText = next + 'px';
        }
        gridEl.addEventListener('wheel', (e) => {
            e.preventDefault();
            let step = e.deltaY < 0 ? 5 : -5;
            changeCellSize(step);
        }, { passive: false });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') {
                changeCellSize(5);
            } else if (e.key === 'ArrowDown') {
                changeCellSize(-5);
            }
        });
        sizeRange.addEventListener('input', (e) => {
            const v = e.target.value;
            document.documentElement.style.setProperty('--cell-size', v + 'px');
            sizeValue.innerText = v + 'px';
        });
        function updateStatus() {
            revealedCountEl.innerText = revealed.filter(Boolean).length;
            currentWordEl.innerText = words[Math.min(currentIndex, TOTAL - 1)] || 'โ';
        }
        function escapeHtml(s) { return String(s || '').replace(/&/g, '&amp;').replace(/</g, '<').replace(/>/g, '>'); }
        function renderRainbowLegend() {
            rainbowLegend.innerHTML = rainbow.map(r => `<div style="display:flex; gap:6px; align-items:center; margin-bottom:4px;">
                <div style="width:18px;height:12px;background:${r.color};border-radius:3px"></div>
                <div style="font-size:13px;color:#fff">${r.name} โ <span style="color:var(--muted)">${r.meaning}</span></div>
            </div>`).join('');
        }
        function calculateMoonPosition(days) {
            const cycle = 28;
            const anglePerDay = 360 / cycle;
            return (days * anglePerDay) % 360;
        }
        function generateMessage() {
            const dateVal = dateInput.value;
            if (!dateVal) { alert("ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ุชุงุฑูุฎ"); return; }
            const startDate = new Date("2024-04-07");
            const selectedDate = new Date(dateVal);
            const daysDiff = Math.floor((selectedDate - startDate) / 86400000);
            const currentDay = (daysDiff % 28 + 28) % 28;
            const moonData = MOON_MANSIONS[currentDay];
            const output = `
                <div style="padding:8px; background:#0e1a24; border:1px solid #173142; border-radius:8px">
                    <div style="font-weight:800; color:#f5d08a; margin-bottom:6px">ููุฒูุฉ ุงูููู: ${moonData.name}</div>
                    <div>ุงูุญุฑู ุงููููู: ${moonData.letter}</div>
                    <div>ุงูุฒุงููุฉ ุงูููุฑูุฉ: ${moonData.angle.toFixed(2)}ยฐ</div>
                    <div>ุงูุฏูุงูุฉ: ${moonData.meaning}</div>
                </div>
            `;
            outputEl.innerHTML = output;
            let tableHTML = "";
            for (let day = 0; day < 28; day++) {
                const angle = calculateMoonPosition(day);
                tableHTML += `
                    <tr>
                        <td>${day + 1}</td>
                        <td>${MOON_MANSIONS[day].name}</td>
                        <td>${MOON_MANSIONS[day].letter}</td>
                        <td>${angle.toFixed(2)}ยฐ</td>
                        <td>${MOON_MANSIONS[day].meaning}</td>
                    </tr>
                `;
            }
            mansionBody.innerHTML = tableHTML;
            abumasharBody.innerHTML = ABU_MASHAR_TABLE
                .map(item => `
                    <tr>
                        <td>${item.name}</td>
                        <td>${item.degree}ยฐ</td>
                        <td>${item.secret}</td>
                        <td>${item.property}</td>
                    </tr>
                `).join("");
        }
        function toggleTables() {
            mainTable.classList.toggle("active");
            abumasharTable.classList.toggle("active");
        }
        (function init() {
            buildGrid();
            sizeValue.innerText = sizeRange.value + 'px';
            renderRainbowLegend();
            closeHouseModal.addEventListener('click', () => {
                houseModal.style.display = "none";
            });
            window.addEventListener('click', (e) => {
                if (e.target === houseModal) {
                    houseModal.style.display = "none";
                }
            });
            btnAnalyze.addEventListener('click', generateMessage);
            btnToggleTables.addEventListener('click', toggleTables);
            generateMessage();
        })();
    </script>
</body>
</html>
